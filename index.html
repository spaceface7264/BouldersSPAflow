<!DOCTYPE html>
<html lang="da">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <title>Join Boulders ‚é∏ Your Bouldering Network</title>
    <link rel="shortcut icon" type="image/png" href="./favicon.png">
    <link rel="icon" type="image/png" href="./favicon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="./favicon.png">
    <link rel="icon" type="image/png" sizes="16x16" href="./favicon.png">
    <link rel="apple-touch-icon" sizes="180x180" href="./favicon.png">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="./styles.css">

    <!-- Sentry Error Monitoring - Load from CDN and initialize immediately -->
    <script src="https://browser.sentry-cdn.com/7.91.0/bundle.min.js" crossorigin="anonymous"></script>
    <script>
      // Initialize Sentry immediately - runs synchronously before any modules
      (function() {
        if (typeof Sentry !== 'undefined') {
          try {
            const isProduction = window.location.hostname === 'join.boulders.dk';
            
            Sentry.init({
              dsn: "https://1cc58b6b7d525b61ce37f528a8ddf2ed@o4510727758741504.ingest.de.sentry.io/4510727788888144",
              environment: isProduction ? 'production' : 'development',
              sendDefaultPii: true,
              sampleRate: 1.0,
              tracesSampleRate: 0.1,
              debug: !isProduction, // Only enable debug in development
              release: 'join-boulders-dk@' + (new Date().toISOString().split('T')[0]), // Release tracking
              // Filter out common non-critical errors
              ignoreErrors: [
                // Browser extensions
                'top.GLOBALS',
                'chrome-extension://',
                'moz-extension://',
                'safari-extension://',
                // Network errors that are expected
                'NetworkError',
                'Failed to fetch',
                'Network request failed',
                // User cancellations
                'AbortError',
                'User cancelled',
                // Common browser quirks
                'ResizeObserver loop limit exceeded',
                'Non-Error promise rejection captured',
                // Script errors from extensions
                /^Script error\.?$/,
                /^Javascript error: Script error\.?$/,
              ],
              beforeSend(event, hint) {
                // Only log in development
                if (!isProduction) {
                  console.log('[Sentry] Capturing:', event.message || event.exception?.values?.[0]?.value);
                }
                return event;
              },
            });
            
            // Verify initialization
            const hub = Sentry.getCurrentHub();
            const client = hub.getClient();
            if (client) {
              if (!isProduction) {
                console.log('[Sentry] ‚úÖ Initialized in', client.getOptions()?.environment, 'mode');
              }
            } else {
              console.error('[Sentry] ‚ùå Initialization failed');
            }
            
            // Make available globally
            window.Sentry = Sentry;
            
            // Test function for debugging (available in all environments)
            window.testSentry = function() {
              const testHub = Sentry.getCurrentHub();
              const testClient = testHub.getClient();
              
              if (!testClient) {
                console.error('[Sentry Test] ‚ùå Client not found');
                return;
              }
              
              console.log('[Sentry Test] Sending test events...');
              Sentry.captureException(new Error('Test error - ' + new Date().toISOString()));
              Sentry.captureMessage('Test message - ' + new Date().toISOString(), 'info');
              console.log('[Sentry Test] ‚úÖ Test events sent - check dashboard in 5-10 seconds');
            };
          } catch (e) {
            console.error('[Sentry] ‚ùå Initialization error:', e);
          }
        } else {
          console.error('[Sentry] ‚ùå Sentry SDK not loaded');
        }
      })();
    </script>

    <!-- Google Tag Manager - Loaded conditionally after consent -->
    <script>
      window.dataLayer = window.dataLayer || [];
      // GTM Container ID - Web container for boulders.dk
      window.GTM_CONTAINER_ID = window.GTM_CONTAINER_ID || 'GTM-KHB92N9P';
      // GTM will be loaded conditionally after cookie consent is checked
      window.GTM_LOADED = false;
    </script>
    <!-- End Google Tag Manager -->
</head>
<body>
    <!-- Google Tag Manager (noscript) - Only shown if consent given -->
    <noscript id="gtmNoscript" style="display: none;">
      <iframe src="https://www.googletagmanager.com/ns.html?id=GTM-KHB92N9P"
      height="0" width="0" style="display:none;visibility:hidden"></iframe>
    </noscript>
    <!-- End Google Tag Manager (noscript) -->
    
    <!-- GTM Utilities -->
    <script type="module" src="./gtm-utils.js"></script>
    <!-- Loading Overlay -->
    <div class="loading-overlay" id="loadingOverlay">
        <div class="loading-spinner">
            <div class="spinner"></div>
        </div>
    </div>
    
    <header class="header" id="headerContent" style="display: none;">
        <div class="header-container">
            <div class="header-content">
                <!-- Logo Section -->
                <div class="logo-section">
                    <img src="https://storage.googleapis.com/boulderscss/logo-flat-white.png" alt="Boulders Logo" class="logo-image" data-action="go-to-step-1" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';" />
                    <div class="logo-fallback" data-action="go-to-step-1">BOULDERS</div>
                </div>
                <!-- Right group: language + auth (language first so dropdown and account sit together) -->
                <div class="header-right">
                    <div class="language-switcher" id="languageSwitcher">
                        <button type="button" class="language-switcher-trigger" id="languageSwitcherTrigger" aria-haspopup="true" aria-expanded="false" aria-label="Select language">
                            <span class="language-flag" id="languageSwitcherTriggerFlag">üá©üá∞</span>
                            <span class="language-name" id="languageSwitcherTriggerName">DA</span>
                            <span class="language-chevron" aria-hidden="true">‚ñº</span>
                        </button>
                        <div class="language-dropdown" id="languageDropdown" role="menu" aria-hidden="true">
                            <button type="button" class="language-btn" role="menuitem" data-lang="da-DK" aria-label="Dansk"><span class="language-flag">üá©üá∞</span><span class="language-name">DA</span></button>
                            <button type="button" class="language-btn" role="menuitem" data-lang="en-GB" aria-label="English"><span class="language-flag">üá¨üáß</span><span class="language-name">EN</span></button>
                            <button type="button" class="language-btn" role="menuitem" data-lang="de-DE" aria-label="Deutsch"><span class="language-flag">üá©üá™</span><span class="language-name">DE</span></button>
                        </div>
                    </div>
                    <div class="header-auth-indicator" id="headerAuthIndicator" style="display: none;">
                        <span class="header-auth-email" id="headerAuthEmail">-</span>
                        <button type="button" class="header-logout-btn" id="headerLogoutBtn" data-action="logout">Log out</button>
                    </div>
                </div>
            </div>
        </div>
    </header>
    
    <!-- Selected Gym Heads-up Display -->
    <div class="gym-heads-up" id="gymHeadsUp">
        <div class="gym-heads-up-content">
            <span class="gym-heads-up-label" data-i18n-key="gym.headsUp">Home gym selected:</span>
            <span class="gym-heads-up-name" id="selectedGymName">-</span>
        </div>
    </div>
    
    <!-- Selected Access Type Heads-up Display -->
    <div class="access-heads-up" id="accessHeadsUp">
        <div class="access-heads-up-content">
            <span class="access-heads-up-label" data-i18n-key="access.headsUp">Access type selected:</span>
            <span class="access-heads-up-name" id="selectedAccessName">-</span>
        </div>
    </div>
    
    <!-- Selected Gym Display (shown above step indicator on step 2) -->
    <div class="selected-gym-display" id="selectedGymDisplay" style="display: none;">
        <button type="button" class="selected-gym-link" id="selectedGymLink" data-action="edit-gym">
            <span id="selectedGymNameDisplay">-</span>
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path>
                <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path>
            </svg>
        </button>
    </div>
    
    <!-- Step Indicator -->
    <div class="step-indicator">
        <div class="step-indicator-container">
            <div class="step-indicator-content">
                <div class="step active">
                    <div class="step-circle active">1</div>
                    <div class="step-label" data-i18n-key="step.homeGym">Home Gym</div>
                </div>
                <div class="step-connector"></div>
                <div class="step inactive">
                    <div class="step-circle inactive">2</div>
                    <div class="step-label" data-i18n-key="step.access">Access</div>
                </div>
                <div class="step-connector"></div>
                <div class="step inactive">
                    <div class="step-circle inactive">3</div>
                    <div class="step-label" data-i18n-key="step.boost">Boost</div>
                </div>
                <div class="step-connector"></div>
                <div class="step inactive">
                    <div class="step-circle inactive">4</div>
                    <div class="step-label" data-i18n-key="step.send">Send</div>
                </div>
            </div>
        </div>
    </div>

    <main class="main" id="mainContent" style="display: none;">
        
        
        <!-- Step Content -->
        <div class="step-content">
            <!-- Step 1: Gym Selection -->
            <div class="step-panel active" id="step-1">
                <div class="step-panel-content">
                    <p class="main-subtitle" data-i18n-key="main.subtitle.step1">Choose your home gym</p>
                    <p class="secondary-subtitle" data-i18n-key="main.subtitle.step1.secondary">This is where you will primarily train ‚àí you will have access to all gyms.</p>
                    
                    <!-- Search Input -->
                    <div class="search-wrapper">
                        <svg class="search-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <circle cx="11" cy="11" r="8"></circle>
                            <path d="m21 21-4.35-4.35"></path>
                        </svg>
                        <input type="text" class="search-input" placeholder="" id="gymSearch" data-i18n-key="button.searchGyms" data-i18n-placeholder="button.searchGyms">
                        <button type="button" class="location-icon-btn" id="findNearestGym" title="" data-i18n-title="button.findNearest">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"></path>
                                <circle cx="12" cy="10" r="3"></circle>
                            </svg>
                        </button>
                        <span class="location-status" id="locationStatus" style="display: none;"></span>
                    </div>
                    
                    <!-- Gym List -->
                    <div class="gym-list">
                        <!-- Gym items will be dynamically loaded here -->
                    </div>
                    
                    <!-- No Results Message -->
                    <div class="no-results hidden" id="noResults" data-i18n-key="search.noResults">
                        No gyms found matching your search.
                    </div>
                </div>
            </div>

            <!-- Step 2: Choose Plan -->
            <div class="step-panel" id="step-2">
                <div class="step-panel-content">
                    <div class="container">
                        <p class="main-subtitle" data-i18n-key="main.subtitle.step2">Choose your access type</p>
                        <p class="secondary-subtitle" data-i18n-key="main.subtitle.step2.secondary">Choose membership if you climb at least once a month.</p>
                        <div class="category-list">
                            <!-- Campaign Category -->
                            <div class="category-item" data-category="campaign">
                                <div class="category-header">
                                    <div class="category-info">
                                        <div class="category-title" data-i18n-key="category.campaign">Campaign</div>
                                        <div class="category-subtitle" data-i18n-key="category.campaign.subtitle">Limited time offers</div>
                                        <div class="campaign-countdown" id="campaignCountdown" aria-live="polite" style="display: none;">
                                            <span class="campaign-countdown-label" data-i18n-key="category.campaign.endsIn">Ends in</span>
                                            <span class="campaign-countdown-value" id="campaignCountdownValue">--</span>
                                        </div>
                                    </div>
                                    <i data-lucide="chevron-down" class="category-icon"></i>
                                </div>
                                <div class="category-content">
                                    <div class="category-description">
                                        <p data-i18n-key="category.campaign.desc">Special promotional offers and limited-time campaigns. Take advantage of these exclusive deals while they last.</p>
                                    </div>
                                    <div class="plans-list">
                                        <!-- Products will be loaded from API -->
                                    </div>
                                </div>
                            </div>

                            <!-- Membership Category -->
                            <div class="category-item" data-category="membership">
                                <div class="category-header">
                                    <div class="category-info">
                                        <div class="category-title" data-i18n-key="category.membership">Membership</div>
                                        <div class="category-subtitle" data-i18n-key="category.membership.subtitle">Ongoing subscription, unlimited access</div>
                                    </div>
                                    <i data-lucide="chevron-down" class="category-icon"></i>
                                </div>
                                <div class="category-content">
                                    <div class="category-description">
                                        <p data-i18n-key="category.membership.desc">Membership is an ongoing subscription with automatic renewal. No signup or cancellation fees. Notice period is the rest of the month + 1 month. </p>
                                    </div>
                                    <div class="plans-list">
                                        <!-- Products will be loaded from API -->
                                    </div>
                                </div>
                            </div>

                            <!-- 15 Day Pass Category -->
                            <div class="category-item" data-category="15daypass">
                                <div class="category-header">
                                    <div class="category-info">
                                        <div class="category-title" data-i18n-key="category.15daypass">15 Day Pass</div>
                                        <div class="category-subtitle" data-i18n-key="category.15daypass.subtitle">Temporary access pass</div>
                                    </div>
                                    <i data-lucide="chevron-down" class="category-icon"></i>
                                </div>
                                <div class="category-content">
                                    <div class="category-description">
                                        <p data-i18n-key="category.15daypass.desc">Get 15 days of unlimited access to all gyms. Perfect for trying out climbing or a short-term visit.</p>
                                    </div>
                                    <div class="plans-list">
                                        <!-- Products will be loaded from API -->
                                    </div>
                                </div>
                            </div>

                            <!-- Punch Card Category -->
                            <div class="category-item" data-category="punchcard">
                                <div class="category-header">
                                    <div class="category-info">
                                        <div class="category-title" data-i18n-key="category.punchcard">Punch Card</div>
                                        <div class="category-subtitle" data-i18n-key="category.punchcard.subtitle">10 entries, shareable physical card</div>
                                    </div>
                                    <i data-lucide="chevron-down" class="category-icon"></i>
                                </div>
                                <div class="category-content">
                                    <div class="category-description">
                                        <p data-i18n-key="category.punchcard.desc">You can buy 1 type of value card at a time. Each entry uses one clip on your value card. Card is valid for 5 years and does not include membership benefits. Refill within 14 days after your last clip and get 100 kr off at the gym.</p>
                                    </div>
                                    <div class="plans-list">
                                        <!-- Products will be loaded from API -->
                                    </div>
                                </div>
                            </div>
                        </div>


                    </div>
                </div>
            </div>
            
            <!-- Step 3: Add-ons -->
            <div class="step-panel" id="step-3">
                <div class="step-panel-content">
                            <p class="main-subtitle" id="mainSubtitle" data-i18n-key="main.subtitle.step3">Would you like fries with that?</p>

                    <!-- Add-on Products -->
                    <div class="plan-section">
                        <div class="plan-info-text">
                            <p data-i18n-key="addons.intro">Enhance your climbing experience with our add-on products.</p>
                        </div>
                        
                        <div class="plan-options" id="addonMode" data-scroll-container data-component="addon-plans"></div>
                        <div class="skip-section">
                                <button type="button" class="back-btn" id="backFromAddons" data-action="go-back-step" data-i18n-key="button.back">
                                Back
                            </button>
                            <button type="button" class="skip-btn" id="skipAddons" data-action="toggle-addons-step" data-i18n-key="button.skip">
                                Skip
                            </button>
                        </div>
                        <div class="scroll-indicator" aria-hidden="true"></div>
                        
                        <!-- Navigation Buttons -->
                        
                    </div>
                </div>
            </div>
            
            <!-- Step 4: Info -->
            <div class="step-panel" id="step-4">
                <div class="step-panel-content">
                    <p class="main-subtitle" data-i18n-key="step4.completePurchase">Complete your purchase</p>
                    <p class="secondary-subtitle" data-i18n-key="step4.loginPrompt">Log in to your existing account or create a new one.</p>

                    <div class="info-layout">
                        <div class="info-form-section">
                            <!-- Login Section -->
                            <div class="info-section" data-auth-section="login">
                                <div class="form-container">
                                    <!-- Auth Mode Toggle Button - Top Right -->
                                    <button class="auth-mode-switch-btn" id="authModeSwitchBtn" data-action="switch-auth-mode" data-mode="create">
                                        <span class="auth-mode-switch-text">Create Account</span>
                                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                            <path d="M18 3a3 3 0 0 0-3 3v12a3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3H6a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3V6a3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3h12a3 3 0 0 0 3-3 3 3 0 0 0-3-3z"></path>
                                        </svg>
                                    </button>
                                    <div class="login-status" data-login-status style="display: none;">
                                        <div class="login-status-content">
                                            <div class="login-status-profile">
                                                <div class="login-status-header">
                                                    <p class="login-status-label">Logged in as</p>
                                                    <div class="profile-info-grid">
                                                        <div class="profile-info-row" data-auth-name-row style="display: none;">
                                                            <span class="profile-info-label">Name:</span>
                                                            <span class="profile-info-value" data-auth-name>-</span>
                                                        </div>
                                                        <div class="profile-info-row" data-auth-dob-row style="display: none;">
                                                            <span class="profile-info-label">Date of birth:</span>
                                                            <span class="profile-info-value" data-auth-dob>-</span>
                                                        </div>
                                                        <div class="profile-info-row" data-auth-email-row style="display: none;">
                                                            <span class="profile-info-label">Email:</span>
                                                            <span class="profile-info-value" data-auth-email>-</span>
                                                        </div>
                                                        <div class="profile-info-row" data-auth-address-row style="display: none;">
                                                            <span class="profile-info-label">Address:</span>
                                                            <span class="profile-info-value" data-auth-address>-</span>
                                                        </div>
                                                        <div class="profile-info-row" data-auth-phone-row style="display: none;">
                                                            <span class="profile-info-label">Phone:</span>
                                                            <span class="profile-info-value" data-auth-phone>-</span>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <div data-login-form-container>
                                        <h3 class="info-section-title" data-i18n-key="form.login">LOG IN</h3>

                                        <form class="login-form">
                                            <div class="form-group">
                                                <label for="loginEmail" data-i18n-key="form.email">E-mail*</label>
                                                <input type="email" id="loginEmail" name="loginEmail" placeholder="" data-i18n-placeholder="form.email.placeholder">
                                        </div>
                                                
                                            <div class="form-group">
                                                <label for="loginPassword" data-i18n-key="form.password">Password*</label>
                                                <input type="password" id="loginPassword" name="loginPassword" placeholder="" data-i18n-placeholder="form.password.placeholder">
                                                <a href="#" class="forgot-password-link" data-action="forgot-password" data-i18n-key="form.forgotPassword">Forgot password?</a>
                                        </div>
                                                
                                            <button type="submit" class="login-btn" data-i18n-key="form.login">LOG IN</button>
                                        </form>
                                        
                                        <!-- Forgot Password Modal -->
                                        <div class="forgot-password-modal" id="forgotPasswordModal" style="display: none;">
                                            <div class="forgot-password-modal-content">
                                                <h3 class="info-section-title" data-i18n-key="form.resetPassword">RESET PASSWORD</h3>
                                                <p class="forgot-password-description" data-i18n-key="form.resetPassword.desc">Enter your email address and we'll send you instructions to reset your password.</p>
                                                
                                                <form class="forgot-password-form" id="forgotPasswordForm">
                                                    <div class="form-group">
                                                        <label for="forgotPasswordEmail" data-i18n-key="form.email">E-mail*</label>
                                                        <input type="email" id="forgotPasswordEmail" name="forgotPasswordEmail" placeholder="" data-i18n-placeholder="form.email.create.placeholder" required>
                                                    </div>
                                                    
                                                    <div class="forgot-password-actions">
                                                        <button type="button" class="forgot-password-cancel-btn" data-action="close-forgot-password" data-i18n-key="button.cancel">Cancel</button>
                                                        <button type="submit" class="login-btn" data-i18n-key="form.sendResetLink">SEND RESET LINK</button>
                                                    </div>
                                                </form>
                                                
                                                <div class="forgot-password-success" id="forgotPasswordSuccess" style="display: none;">
                                                    <p class="forgot-password-success-message" data-i18n-key="form.resetPassword.success">Password reset instructions have been sent to your email.</p>
                                                    <button type="button" class="login-btn" data-action="close-forgot-password" data-i18n-key="button.close">Close</button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Registration Section (initially hidden) -->
                            <div class="info-section" data-auth-section="create" style="display: none;">
                        <div class="form-container">
                            <!-- Auth Mode Toggle Button - Top Right -->
                            <button class="auth-mode-switch-btn" id="authModeSwitchBtn" data-action="switch-auth-mode" data-mode="login">
                                <span class="auth-mode-switch-text">Login</span>
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <path d="M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4"></path>
                                    <polyline points="10 17 15 12 10 7"></polyline>
                                    <line x1="15" y1="12" x2="3" y2="12"></line>
                                </svg>
                            </button>
                            <h3 class="info-section-title" data-i18n-key="form.createProfile">CREATE PROFILE</h3>
                        <div class="buyer-section">
                            <div class="buyer-header">
                                <h4 class="buyer-title" data-i18n-key="form.buyer">Buyer</h4>
                            </div>
                        </div>
                            <form class="registration-form">
                        <div class="form-row">
                        <div class="form-group">
                                    <label for="firstName" data-i18n-key="form.firstName">First name*</label>
                                    <input type="text" id="firstName" name="firstName" placeholder="" data-i18n-placeholder="form.firstName.placeholder" data-api-field="customer.firstName" required>
                                     <div class="error-message" data-i18n-key="form.error.firstName">Please enter your first name</div>
                                 </div>
                                 
                                 <div class="form-group">
                                    <label for="lastName" data-i18n-key="form.lastName">Last name*</label>
                                    <input type="text" id="lastName" name="lastName" placeholder="" data-i18n-placeholder="form.lastName.placeholder" data-api-field="customer.lastName" required>
                                     <div class="error-message" data-i18n-key="form.error.lastName">Please enter your last name</div>
                                 </div>
                             </div>
                             
                             <div class="form-group">
                                 <label for="dateOfBirth" data-i18n-key="form.dateOfBirth">Date of birth*</label>
                                 <div class="date-input-container">
                                     <input type="date" id="dateOfBirth" name="dateOfBirth" class="date-input" data-api-field="customer.dateOfBirth" required>
                                     
                                 </div>
                             </div>
                             
                            <div class="form-group">
                                <label for="streetAddress" data-i18n-key="form.streetAddress">Street and house number*</label>
                                <input type="text" id="streetAddress" name="streetAddress" placeholder="" data-i18n-placeholder="form.streetAddress.placeholder" data-api-field="customer.address.street" required>
                        </div>
                        
                        <div class="form-row">
                            <div class="form-group">
                                    <label for="postalCode" data-i18n-key="form.postalCode">Postal code*</label>
                                    <input type="text" id="postalCode" name="postalCode" placeholder="" data-i18n-placeholder="form.postalCode.placeholder" data-api-field="customer.address.postalCode" required>
                            </div>
                            
                            <div class="form-group">
                                     <label for="city" data-i18n-key="form.city">City</label>
                                     <input type="text" id="city" name="city" placeholder="" data-i18n-placeholder="form.city.placeholder" data-api-field="customer.address.city" readonly>
                            </div>
                        </div>
                        
                        <div class="form-group">
                                 <label for="email" data-i18n-key="form.email.create">E-mail*</label>
                                 <input type="email" id="email" name="email" placeholder="" data-i18n-placeholder="form.email.create.placeholder" data-api-field="customer.email" required>
                                 <div class="error-message" data-i18n-key="form.error.email">Please enter a valid email address</div>
                             </div>
                             
                             <div class="form-row">
                                 <div class="form-group phone-country">
                                     <div class="country-selector">
                                         <span class="flag-icon">üá©üá∞</span>
                                         <select id="countryCode" name="countryCode" data-api-field="customer.phone.countryCode" required>
                                             <option value="+45">+45</option>
                                         </select>
                                     </div>
                                 </div>
                                 
                                 <div class="form-group phone-number">
                                     <label for="phoneNumber" data-i18n-key="form.phoneNumber">Mobile number*</label>
                                     <input type="tel" id="phoneNumber" name="phoneNumber" placeholder="" data-i18n-placeholder="form.phoneNumber.placeholder" data-api-field="customer.phone.number">
                                 </div>
                             </div>
                             
                            <div class="form-group">
                                <label for="password" data-i18n-key="form.password.create">Password*</label>
                               <input type="password" id="password" name="password" placeholder="" data-i18n-placeholder="form.password.create.placeholder" data-api-field="customer.password" required minlength="6">
                            </div>
                            
                          
                            
                            <!-- Marketing Consent -->
                            <div class="form-group form-group-consent">
                                <label class="consent-checkbox">
                                    <input type="checkbox" id="marketingConsent" data-api-field="consent.marketing" checked>
                                    <span class="checkmark"></span>
                                    <span class="consent-text" data-i18n-key="cart.consent.marketing">I want to receive marketing emails. Read our <a href="#" data-action="open-terms" data-terms-type="privacy" onclick="event.preventDefault();">Data policy</a>.</span>
                                </label>
                            </div>
                            
                            <!-- SMS Consent -->
                            <div class="form-group form-group-consent">
                                <label class="consent-checkbox">
                                    <input type="checkbox" id="smsConsent" data-api-field="consent.sms" checked>
                                    <span class="checkmark"></span>
                                    <span class="consent-text" data-i18n-key="cart.consent.sms">I want to receive SMS messages. Read our <a href="#" data-action="open-terms" data-terms-type="privacy" onclick="event.preventDefault();">Data policy</a>.</span>
                                </label>
                            </div>
                            
                              <!-- Privacy Policy Consent -->
                              <div class="form-group form-group-consent">
                                <label class="consent-checkbox">
                                    <input type="checkbox" id="privacyConsent" data-api-field="consent.privacy" required>
                                    <span class="checkmark"></span>
                                    <span class="consent-text" data-i18n-key="cart.consent.privacy">I accept the <a href="#" data-action="open-terms" data-terms-type="privacy" onclick="event.preventDefault();">Privacy Policy</a></span>
                                </label>
                            </div>
                            
                            <!-- Save Account Button -->
                            <div class="form-group">
                                <button type="button" class="save-account-btn" data-action="save-account" data-i18n-key="form.saveAccount">
                                    Save Account
                                </button>
                                <div class="save-account-message" id="saveAccountMessage" style="display: none;"></div>
                            </div>
                    </form>
                        
                        <!-- Parent/Guardian Registration Form -->
                        <div class="parent-guardian-form" id="parentGuardianForm" style="display: none;">
                            <h4 class="parent-form-title" data-i18n-key="form.parentGuardian">Parent/Guardian Information</h4>

                            
                            <!-- Same Address Toggle -->
                            <div class="same-address-toggle">
                                <label class="toggle-label">
                                    <input type="checkbox" class="toggle-input" id="sameAddressToggle" data-api-field="guardian.sameAddressAsCustomer">
                                    <span class="toggle-slider"></span>
                                    <span data-i18n-key="form.sameAddress">Same address and contact information</span>
                                </label>
            </div>
            
                            <form class="registration-form">
                                <div class="form-group">
                                    <label for="parentFullName" data-i18n-key="form.parentFullName">First and last name*</label>
                                    <input type="text" id="parentFullName" name="parentFullName" placeholder="" data-i18n-placeholder="form.parentFullName.placeholder" data-api-field="guardian.fullName" required>
            </div>
            
                                <div class="form-group">
                                    <label for="parentDateOfBirth" data-i18n-key="form.parentDateOfBirth">Date of birth*</label>
                                    <div class="date-input-container">
                                        <input type="date" id="parentDateOfBirth" name="parentDateOfBirth" class="date-input" data-api-field="guardian.dateOfBirth" required>
                                       
                                    </div>
                                </div>
                                
                                <div class="form-group">
                                    <label for="parentStreetAddress" data-i18n-key="form.parentStreetAddress">Street and house number*</label>
                                    <input type="text" id="parentStreetAddress" name="parentStreetAddress" placeholder="" data-i18n-placeholder="form.parentStreetAddress.placeholder" data-api-field="guardian.address.street" required>
                                </div>
                                
                                <div class="form-row">
                                    <div class="form-group">
                                        <label for="parentPostalCode" data-i18n-key="form.parentPostalCode">Postal code*</label>
                                        <input type="text" id="parentPostalCode" name="parentPostalCode" placeholder="" data-i18n-placeholder="form.parentPostalCode.placeholder" data-api-field="guardian.address.postalCode" required>
                                    </div>
                                    
                                    <div class="form-group">
                                        <label for="parentCity" data-i18n-key="form.parentCity">City</label>
                                        <input type="text" id="parentCity" name="parentCity" placeholder="" data-i18n-placeholder="form.parentCity.placeholder" data-api-field="guardian.address.city" readonly>
                                    </div>
                                </div>
                                
                                <div class="form-group">
                                    <label for="parentEmail" data-i18n-key="form.parentEmail">E-mail*</label>
                                    <input type="email" id="parentEmail" name="parentEmail" placeholder="" data-i18n-placeholder="form.parentEmail.placeholder" data-api-field="guardian.email" required>
                                </div>
                                
                                <div class="form-row">
                                    <div class="form-group phone-country">
                                        <div class="country-selector">
                                            <span class="flag-icon">üá©üá∞</span>
                                            <select id="parentCountryCode" name="parentCountryCode" data-api-field="guardian.phone.countryCode" required>
                                                <option value="+45">+45</option>
                                            </select>
                                            <span class="dropdown-arrow">‚ñº</span>
                                        </div>
                                    </div>
                                    
                                    <div class="form-group phone-number">
                                        <label for="parentPhoneNumber" data-i18n-key="form.parentPhoneNumber">Mobile number*</label>
                                        <input type="tel" id="parentPhoneNumber" name="parentPhoneNumber" placeholder="" data-i18n-placeholder="form.parentPhoneNumber.placeholder" data-api-field="guardian.phone.number">
                                    </div>
                                </div>
                                
                                <div class="form-group">
                                    <label for="parentPassword" data-i18n-key="form.password.create">Password*</label>
                                   <input type="password" id="parentPassword" name="parentPassword" placeholder="" data-i18n-placeholder="form.password.create.placeholder" data-api-field="guardian.password" required minlength="6">
                                </div>
                                
                                <div class="form-group">
                                    <label for="parentPrimaryGym">Primary Boulders gym / Pick-up point*</label>
                                    <div class="select-container">
                                        <select id="parentPrimaryGym" name="parentPrimaryGym" data-api-field="guardian.primaryGym" required>
                                            <option value="">Select a gym</option>
                                            <option value="boulders-copenhagen">Boulders Copenhagen</option>
                                            <option value="boulders-aarhus">Boulders Aarhus</option>
                                            <option value="boulders-odense">Boulders Odense</option>
                                        </select>
                                        <span class="dropdown-arrow">‚ñº</span>
                                    </div>
                                </div>
                            </form>
                        </div>
                    </div>
                            </div>
                        </div>
                        
                        <!-- Order Summary Section -->
                                <div class="order-summary-section">
                            <div class="order-summary">
                                <div class="summary-header">
                                    <h3 class="summary-title" data-i18n-key="cart.title">Cart</h3>
                                    <button class="summary-edit-btn" type="button" data-action="edit-cart" aria-label="Edit cart" data-i18n-aria-label="button.edit">
                                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                                            <path d="M12 20h9"/>
                                            <path d="M16.5 3.5a2.121 2.121 0 0 1 3 3L7 19l-4 1 1-4L16.5 3.5z"/>
                                        </svg>
                                    </button>
                                </div>
                                <div class="cart-timer-countdown" id="cartTimerCountdown" aria-live="polite" style="display: none;" role="status">
                                    <span class="cart-timer-countdown-icon" aria-hidden="true">
                                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg>
                                    </span>
                                    <span class="cart-timer-countdown-label" data-i18n-key="cart.timeToComplete">Time left to complete:</span>
                                    <span class="cart-timer-countdown-value" id="cartTimerCountdownValue" aria-label="15 minutes 0 seconds">15:00</span>
                                </div>
                                
                                <!-- Cart Items -->
                                <template id="cart-item-template">
                                    <div class="cart-item" data-cart-item>
                                        <span class="item-name" data-element="name"></span>
                                        <span class="item-price" data-element="price"></span>
                                    </div>
                                </template>

                                <!-- Add-on Card Template: list row + expandable details (modal redesign) -->
                                <template id="addon-card-template">
                                    <div class="plan-card addon-card" data-plan-id>
                                        <div class="addon-card-main" role="button" tabindex="0">
                                            <div class="addon-card-thumb" data-action="open-lightbox" role="img">
                                                <img data-element="image" alt="" />
                                            </div>
                                            <div class="addon-card-content">
                                                <div class="plan-type" data-element="name">Add-on</div>
                                                <div class="addon-card-description-wrap">
                                                    <div class="plan-description" data-element="description"></div>
                                                </div>
                                            </div>
                                            <div class="addon-card-actions">
                                                <div class="addon-card-price">
                                                    <span class="addon-original-price" data-element="originalPrice"></span>
                                                    <div class="plan-price">
                                                        <span class="price-amount" data-element="discountedPrice">0</span>
                                                        <span class="price-unit">kr</span>
                                                    </div>
                                                </div>
                                                <div class="addon-card-actions-row">
                                                    <button class="addon-add-to-cart-btn" data-action="toggle-addon" data-i18n-key="button.addToCart">Add to cart</button>
                                                    <button type="button" class="addon-card-description-toggle" aria-expanded="false" aria-label="Show full description" title="Show full description">‚ñº</button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </template>

                                <div class="cart-items" data-component="cart-items"></div>
                                
                                <!-- Payment Overview (subscription pricing: monthly, pay now) ‚Äì below subscription, above addons -->
                                <div class="payment-overview" style="display: none;">
                                    <div class="payment-overview-item">
                                        <span class="payment-label" data-i18n-key="cart.monthlyFee">Monthly fee:</span>
                                        <span class="payment-amount" data-summary-field="monthly-payment">0,00 kr./md</span>
                                    </div>
                                    <div class="payment-overview-item payment-overview-discount" style="display: none;">
                                        <span class="payment-label" data-i18n-key="cart.discountAmount">Discount:</span>
                                        <span class="payment-amount" data-summary-field="discount-amount">-0,00 kr.</span>
                                    </div>
                                    <div class="payment-overview-item payment-overview-paynow">
                                        <div class="payment-overview-paynow-row">
                                            <span class="payment-label" data-i18n-key="cart.payNow">Pay now:</span>
                                            <span class="payment-label-period"></span>
                                            <span class="payment-amount" data-summary-field="pay-now">0,00 kr.</span>
                                        </div>
                                        <div class="payment-overview-bound-until" data-summary-field="payment-bound-until" style="display: none;"></div>
                                    </div>
                                </div>
                                
                                <!-- Addon items (below subscription pricing, above total) -->
                                <div class="cart-addon-items" data-component="cart-addon-items"></div>
                                
                                <!-- Cart total (below addons) -->
                                <div class="payment-overview payment-overview-total-wrap" style="display: none;">
                                    <div class="payment-overview-item payment-overview-total" style="display: none;">
                                        <div class="payment-overview-paynow-row">
                                            <span class="payment-label" data-i18n-key="cart.total">Total:</span>
                                            <span class="payment-amount" data-summary-field="total">0,00 kr.</span>
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- Discount Code -->
                                <div class="discount-section">
                                    <button class="discount-toggle" type="button">
                                        <span data-i18n-key="cart.discount">Discount code</span>
                                        <span class="toggle-icon">+</span>
                                    </button>
                                    <div class="discount-form" style="display: none;">
                                        <input type="text" placeholder="" class="discount-input" data-i18n-placeholder="cart.discount.placeholder">
                                        <button type="button" class="apply-discount-btn" data-i18n-key="button.apply">Apply</button>
                                    </div>
                                    <div class="discount-display" data-discount-display style="display: none;"></div>
                                </div>
                                
                                <!-- Consents -->
                                <div class="consents-section">
                                    <label class="consent-checkbox">
                                        <input type="checkbox" id="termsConsent" data-api-field="consent.terms" required>
                                        <span class="checkmark"></span>
                                        <span class="consent-text" data-i18n-key="cart.consent.terms">I accept the <a href="#" data-action="open-terms" data-terms-type="terms" onclick="event.preventDefault();">Terms and Conditions</a></span>
                                    </label>
                                </div>
                                
                                <!-- Payment Methods -->
                                <div class="payment-methods">
                                    <h4 class="payment-title" data-i18n-key="cart.paymentMethod">Choose payment method</h4>
                                    <p style="font-size: 0.875rem; color: #666; margin-bottom: 1rem; margin-top: 0.5rem;" data-i18n-key="cart.paymentRedirect">
                                        You will be redirected to our secure payment provider to complete your payment.
                                    </p>
                                    
                                    <div class="payment-option">
                                        <input type="radio" id="cardPayment" name="paymentMethod" value="card" data-api-field="payment.method">
                                        <label for="cardPayment" class="payment-label">
                                            <div class="payment-icon">
                                                <svg width="24" height="16" viewBox="0 0 24 16" fill="none">
                                                    <rect x="1" y="3" width="22" height="10" rx="2" stroke="currentColor" stroke-width="2"/>
                                                    <path d="M1 7h22" stroke="currentColor" stroke-width="2"/>
                                                </svg>
                                            </div>
                                            <span data-i18n-key="cart.cardPayment">Card payment</span>
                                        </label>
                                    </div>
                                    
                                    <div class="payment-option">
                                        <input type="radio" id="applePay" name="paymentMethod" value="apple" data-api-field="payment.method">
                                        <label for="applePay" class="payment-label">
                                            <div class="payment-icon">
                                                <svg width="24" height="16" viewBox="0 0 24 16" fill="none">
                                                    <path d="M12 2C8.5 2 6 4.5 6 8c0 3.5 2.5 6 6 6s6-2.5 6-6c0-3.5-2.5-6-6-6z" stroke="currentColor" stroke-width="2"/>
                                                    <path d="M12 6v4l2 2" stroke="currentColor" stroke-width="2"/>
                                                </svg>
                                            </div>
                                            <span>Apple Pay</span>
                                        </label>
                                    </div>
                                </div>
                                
                                <!-- Card Payment Form - REMOVED: Users are redirected to payment provider -->
                                <!-- This form is not used - payment is handled by external payment provider -->
                                <div class="card-payment-form" id="cardPaymentForm" style="display: none !important;">
                                    <!-- Form removed - users are redirected to payment provider for card entry -->
                                </div>
                                
                                <!-- Campaign Warning Banner -->
                                <div class="campaign-warning-banner" id="campaignWarningBanner" style="display: none;" role="alert">
                                    <div class="campaign-warning-icon">
                                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                                            <path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"></path>
                                            <line x1="12" y1="9" x2="12" y2="13"></line>
                                            <line x1="12" y1="17" x2="12.01" y2="17"></line>
                                        </svg>
                                    </div>
                                    <p class="campaign-warning-message" data-i18n-key="cart.campaignWarning.message">
                                        Important: If you proceed to payment without completing the purchase, you may be blocked from purchasing campaigns later.
                                    </p>
                                </div>
                                                                <!-- Campaign Warning Banner -->
                                <div class="campaign-warning-banner" id="campaignWarningBanner" style="display: none;" role="alert">
                                    <div class="campaign-warning-icon">
                                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                                            <path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"></path>
                                            <line x1="12" y1="9" x2="12" y2="13"></line>
                                            <line x1="12" y1="17" x2="12.01" y2="17"></line>
                                        </svg>
                                    </div>
                                    <p class="campaign-warning-message" data-i18n-key="cart.campaignWarning.message">
                                        If you proceed to payment without completing the purchase, you may be blocked from purchasing campaigns later.
                                    </p>
                                </div>
                                
                                <!-- Checkout Button -->
                                <button class="checkout-btn" data-action="submit-checkout" disabled data-i18n-key="cart.checkout">
                                    Checkout
                                </button>
                                
                                <!-- FAQ Help Link -->
                                <div class="faq-help-link-section">
                                    <a href="#faqSection" class="faq-help-link" data-action="scroll-to-faq">
                                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                            <circle cx="12" cy="12" r="10"></circle>
                                            <line x1="12" y1="16" x2="12" y2="12"></line>
                                            <line x1="12" y1="8" x2="12.01" y2="8"></line>
                                        </svg>
                                        <span data-i18n-key="cart.faqHelp">Questions? See FAQ</span>
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
            
            <!-- Step 5: Confirmation -->
            <div class="step-panel" id="step-5">
                <div class="step-panel-content">
                    <!-- Top Section - Success Confirmation -->
                    <div class="confirmation-header">
                        <div class="success-badge">
                            <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/>
                                <path d="M22 4L12 14.01l-3-3"/>
                            </svg>
                        </div>
                        <h1 class="success-title" data-i18n-key="confirmation.title">SUCCESS!</h1>
                        <p class="success-message" data-i18n-key="confirmation.message">Your membership has been confirmed! You'll receive an email with all the details shortly.</p>
                        </div>
                        
                    <!-- Main Content Layout -->
                    <div class="confirmation-layout">
                        <!-- Left Column - Order & Membership Summary -->
                        <div class="confirmation-left">
                            <!-- Order Details Card -->
                            <div class="confirmation-card">
                                <h3 class="card-title">Order Details</h3>
                                <div class="order-info">
                                    <div class="order-item">
                                        <span class="order-label">Order Number:</span>
                                        <span class="order-value" data-summary-field="order-number">‚Äî</span>
                                    </div>
                                    <div class="order-item">
                                        <span class="order-label">Date:</span>
                                        <span class="order-value" data-summary-field="order-date">‚Äî</span>
                                    </div>
                                </div>
                                
                                <template id="confirmation-item-template">
                                    <div class="purchase-item" data-confirmation-item>
                                        <span class="item-name" data-element="name"></span>
                                        <span class="item-price" data-element="price"></span>
                                    </div>
                                </template>

                                <div class="purchase-items" data-component="confirmation-items"></div>
                                
                                <div class="order-total">
                                    <span class="total-label">Total:</span>
                                    <span class="total-amount" data-summary-field="order-total">0,00 kr</span>
                                </div>
                                
                                <button class="receipt-btn" id="showDetailedReceiptBtn" data-action="show-detailed-receipt" style="margin-top: 20px;">
                                    Vis detaljeret kvittering
                                </button>
                            </div>
                            
                            <!-- Detailed Receipt Modal -->
                            <div class="receipt-modal" id="detailedReceiptModal" style="display: none;">
                                <div class="receipt-modal-content">
                                    <div class="receipt-header">
                                        <div class="receipt-header-left">
                                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                                <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
                                                <polyline points="14 2 14 8 20 8"></polyline>
                                                <line x1="16" y1="13" x2="8" y2="13"></line>
                                                <line x1="16" y1="17" x2="8" y2="17"></line>
                                                <polyline points="10 9 9 9 8 9"></polyline>
                                            </svg>
                                            <h2>Ordrebekr√¶ftelse</h2>
                                        </div>
                                        <div class="receipt-header-right">
                                            <span class="receipt-order-number">Ordre <span id="receiptOrderNumber">‚Äî</span></span>
                                            <span class="receipt-date" id="receiptDate">‚Äî</span>
                                        </div>
                                    </div>
                                    
                                    <div class="receipt-body">
                                        <div class="receipt-section">
                                            <div class="receipt-columns">
                                                <div class="receipt-column">
                                                    <h3>Ordreoversigt</h3>
                                                    <div class="receipt-row">
                                                        <span>Subtotal:</span>
                                                        <span id="receiptSubtotal">‚Äî</span>
                                                    </div>
                                                    <div class="receipt-row">
                                                        <span>Rabat:</span>
                                                        <span id="receiptDiscount">‚Äî</span>
                                                    </div>
                                                    <div class="receipt-row receipt-total">
                                                        <span>TOTALT:</span>
                                                        <span id="receiptTotal">‚Äî</span>
                                                    </div>
                                                    <div class="receipt-vat">
                                                        inklusiv moms (25%): <span id="receiptVat">‚Äî</span>
                                                    </div>
                                                </div>
                                                
                                                <div class="receipt-column">
                                                    <h3>Betalinger</h3>
                                                    <div class="receipt-row">
                                                        <span>Betalingsmetode:</span>
                                                        <span id="receiptPaymentMethod">‚Äî</span>
                                                    </div>
                                                    <div class="receipt-row">
                                                        <span>Betalt bel√∏b:</span>
                                                        <span id="receiptAmountPaid">‚Äî</span>
                                                    </div>
                                                    <div class="receipt-row">
                                                        <span>Transaktions-id:</span>
                                                        <span id="receiptTransactionId">‚Äî</span>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <div class="receipt-section">
                                            <div class="receipt-columns">
                                                <div class="receipt-column">
                                                    <h3>S√¶lgers oplysninger</h3>
                                                    <div class="receipt-info" id="receiptSellerInfo">
                                                        <div><strong>S√¶lgerens navn:</strong> <span id="receiptSellerName">‚Äî</span></div>
                                                        <div><strong>Adresse:</strong> <span id="receiptSellerAddress">‚Äî</span></div>
                                                        <div><strong>CVR-nummer:</strong> <span id="receiptSellerCVR">‚Äî</span></div>
                                                        <div><strong>Telefon:</strong> <span id="receiptSellerPhone">‚Äî</span></div>
                                                        <div><strong>E-mail:</strong> <span id="receiptSellerEmail">‚Äî</span></div>
                                                    </div>
                                                </div>
                                                
                                                <div class="receipt-column">
                                                    <h3>Kundens informationer</h3>
                                                    <div class="receipt-info" id="receiptCustomerInfo">
                                                        <div><strong>Kundens navn:</strong> <span id="receiptCustomerName">‚Äî</span></div>
                                                        <div><strong>Adresse:</strong> <span id="receiptCustomerAddress">‚Äî</span></div>
                                                        <div><strong>Telefon:</strong> <span id="receiptCustomerPhone">‚Äî</span></div>
                                                        <div><strong>E-mail:</strong> <span id="receiptCustomerEmail">‚Äî</span></div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <div class="receipt-section">
                                            <h3>K√∏bte v√¶rdikort</h3>
                                            <div class="receipt-items" id="receiptItems">
                                                <!-- Items will be populated here -->
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div class="receipt-footer">
                                        <button class="receipt-close-btn" id="closeReceiptBtn" data-action="close-detailed-receipt">LUK</button>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Membership Details Card (for regular memberships) -->
                            <div class="confirmation-card" id="confirmationMembershipSection" style="display: none;">
                                <h3 class="card-title" data-i18n-key="cart.membershipDetails">Membership Details</h3>
                                
                                <!-- Signature Case Information (if contract was signed) -->
                                <div class="signature-case-info" id="signatureCaseInfo" style="display: none; margin-bottom: 20px; padding-bottom: 20px; border-bottom: 1px solid rgba(255, 255, 255, 0.1);">
                                    <div style="display: flex; align-items: center; justify-content: space-between; gap: 12px; flex-wrap: wrap;">
                                        <div style="display: flex; align-items: center; gap: 10px; flex: 1; min-width: 200px;">
                                            <div style="display: flex; flex-direction: column; gap: 4px;">
                                                <span style="font-size: 12px; color: rgba(255, 255, 255, 0.6); text-transform: uppercase; letter-spacing: 0.5px;">Contract</span>
                                                <span id="signatureCaseStatus" style="font-size: 14px; font-weight: 600; line-height: 1.2;">Signed</span>
                                            </div>
                                        </div>
                                        <div style="display: flex; gap: 8px; align-items: center;">
                                            <a href="#" id="viewContractLink" target="_blank" style="display: none; padding: 8px 16px; background: rgba(34, 211, 238, 0.1); color: #22d3ee; text-decoration: none; border-radius: 6px; font-size: 13px; font-weight: 600; border: 1px solid rgba(34, 211, 238, 0.3); transition: all 0.2s; white-space: nowrap;" onmouseover="this.style.background='rgba(34, 211, 238, 0.2)'; this.style.borderColor='rgba(34, 211, 238, 0.5)'" onmouseout="this.style.background='rgba(34, 211, 238, 0.1)'; this.style.borderColor='rgba(34, 211, 238, 0.3)'">
                                                View Contract
                                            </a>
                                            <button id="signContractBtn" style="display: none; padding: 8px 16px; background: rgba(251, 191, 36, 0.1); color: #FBBF24; text-decoration: none; border-radius: 6px; font-size: 13px; font-weight: 600; border: 1px solid rgba(251, 191, 36, 0.3); transition: all 0.2s; white-space: nowrap; cursor: pointer;" onmouseover="this.style.background='rgba(251, 191, 36, 0.2)'; this.style.borderColor='rgba(251, 191, 36, 0.5)'" onmouseout="this.style.background='rgba(251, 191, 36, 0.1)'; this.style.borderColor='rgba(251, 191, 36, 0.3)'">
                                                Sign Contract
                                            </button>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="membership-info">
                                    <div class="membership-item">
                                        <span class="membership-label" data-i18n-key="cart.memberName">Member Name:</span>
                                        <span class="membership-value" data-summary-field="member-name">‚Äî</span>
                                    </div>
                                    <div class="membership-item">
                                        <span class="membership-label" data-i18n-key="cart.membershipNumber">Membership Number:</span>
                                        <span class="membership-value" data-summary-field="membership-number">‚Äî</span>
                                    </div>
                                    <div class="membership-item">
                                        <span class="membership-label">Type:</span>
                                        <span class="membership-value" data-summary-field="membership-type">‚Äî</span>
                                    </div>
                                    <div class="membership-item">
                                        <span class="membership-label">Primary Gym:</span>
                                        <span class="membership-value" data-summary-field="primary-gym">‚Äî</span>
                                    </div>
                                    <div class="membership-item">
                                        <span class="membership-label">Monthly Price:</span>
                                        <span class="membership-value" data-summary-field="membership-price">0,00 kr</span>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- 15 Day Pass Details Card -->
                            <div class="confirmation-card" id="confirmation15DayPassSection" style="display: none;">
                                <h3 class="card-title">15 Day Pass Details</h3>
                                <div class="membership-info">
                                    <div class="membership-item">
                                        <span class="membership-label" data-i18n-key="cart.memberName">Member Name:</span>
                                        <span class="membership-value" data-summary-field="member-name">‚Äî</span>
                                    </div>
                                    <div class="membership-item">
                                        <span class="membership-label">Pass Type:</span>
                                        <span class="membership-value" data-summary-field="pass-type">15 Day Pass</span>
                                    </div>
                                    <div class="membership-item">
                                        <span class="membership-label">Primary Gym:</span>
                                        <span class="membership-value" data-summary-field="primary-gym">‚Äî</span>
                                    </div>
                                    <div class="membership-item">
                                        <span class="membership-label">Valid From:</span>
                                        <span class="membership-value" data-summary-field="pass-start-date">‚Äî</span>
                                    </div>
                                    <div class="membership-item">
                                        <span class="membership-label">Valid Until:</span>
                                        <span class="membership-value" data-summary-field="pass-end-date">‚Äî</span>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Punch Card Details Card -->
                            <div class="confirmation-card" id="confirmationPunchCardSection" style="display: none;">
                                <h3 class="card-title">Punch Card Details</h3>
                                <div class="membership-info">
                                    <div class="membership-item">
                                        <span class="membership-label">Navn:</span>
                                        <span class="membership-value" data-summary-field="member-name">‚Äî</span>
                                    </div>
                                    <div class="membership-item">
                                        <span class="membership-label">Card Type:</span>
                                        <span class="membership-value" data-summary-field="punch-card-type">‚Äî</span>
                                    </div>
                                    <div class="membership-item">
                                        <span class="membership-label">Quantity:</span>
                                        <span class="membership-value" data-summary-field="punch-card-quantity">‚Äî</span>
                                    </div>
                                    <div class="membership-item">
                                        <span class="membership-label">Valid Until:</span>
                                        <span class="membership-value" data-summary-field="punch-card-expiry">‚Äî</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Right Column - Next Steps -->
                        <div class="confirmation-right">
                            <!-- Next Steps -->
                        <div class="next-steps">
                                <h3 class="steps-title">What happens next?</h3>
                                <ul class="steps-list">
                                    <li class="step-item">
                                        <div class="step-icon">
                                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                                <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"/>
                                                <path d="M22 6L12 13 2 6"/>
                                            </svg>
                                        </div>
                                        <span id="nextStep1">Email confirmation sent to your inbox</span>
                                    </li>
                                    <li class="step-item">
                                        <div class="step-icon">
                                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                                <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/>
                                                <path d="M22 4L12 14.01l-3-3"/>
                                            </svg>
                                        </div>
                                        <span id="nextStep2">Membership activation & auto-renewal setup</span>
                                    </li>
                                    <li class="step-item">
                                        <div class="step-icon">
                                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                                <path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"/>
                                                <path d="M3.27 6.96L12 12.01l8.73-5.05"/>
                                                <path d="M12 22.08V12"/>
                                            </svg>
                                        </div>
                                        <span id="nextStep3">Pick up your membership card at the gym</span>
                                    </li>
                            </ul>
                        </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- FAQ Section -->
        <div class="faq-section" id="faqSection" style="display: none;">
            <div class="faq-container">
                <h2 class="faq-title" data-i18n-key="faq.title">Frequently Asked Questions</h2>
                <div class="faq-list">
                    <!-- FAQ items will be dynamically rendered here -->
                </div>
            </div>
        </div>
    </main>
    
    <!-- Terms Modal -->
    <!-- Terms and Conditions Modal -->
    <div class="terms-modal" id="termsModal" style="display: none;">
        <div class="terms-modal-content">
            <div class="terms-modal-header">
                <h3 class="terms-modal-title" id="termsModalTitle">Terms and Conditions</h3>
                <div class="terms-modal-header-actions">
                    <button class="terms-modal-close" id="termsModalClose" aria-label="Close">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M18 6L6 18M6 6l12 12"/>
                        </svg>
                    </button>
                </div>
            </div>
            <!-- Tabs for Terms Modal (only shown when termsType is 'terms') -->
            <div class="terms-modal-tabs" id="termsModalTabs" style="display: none;">
                <button class="terms-tab active" data-tab="membership" data-i18n-key="terms.tab.membership">Membership / 15 Day</button>
                <button class="terms-tab" data-tab="punchcard" data-i18n-key="terms.tab.punchcard">Punch Card</button>
            </div>
            <!-- Search Input -->
            <div class="terms-modal-search" id="termsModalSearch" style="display: none;">
                <input type="text" id="termsSearchInput" placeholder="Search terms..." class="terms-search-input" data-placeholder-da="S√∏g i vilk√•r..." data-placeholder-en="Search terms...">
                <button class="terms-search-clear" id="termsSearchClear" style="display: none;" aria-label="Clear search">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M18 6L6 18M6 6l12 12"/>
                    </svg>
                </button>
            </div>
            <div class="terms-modal-body">
                <div class="terms-modal-loading" id="termsModalLoading" style="display: none;">
                    <div class="terms-modal-spinner"></div>
                    <p data-i18n-key="modal.loading">Loading...</p>
                </div>
                <div class="terms-modal-content-text" id="termsModalContent">
                    <!-- Content will be loaded here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Data Policy Modal -->
    <div class="terms-modal" id="dataPolicyModal" style="display: none;">
        <div class="terms-modal-content">
            <div class="terms-modal-header">
                <h3 class="terms-modal-title">Data Policy</h3>
                <div class="terms-modal-header-actions">
                    <button class="terms-modal-close" id="dataPolicyModalClose" aria-label="Close">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M18 6L6 18M6 6l12 12"/>
                        </svg>
                    </button>
                </div>
            </div>
            <!-- Search (same as T&C modal) -->
            <div class="terms-modal-search" id="dataPolicyModalSearch">
                <input type="text" id="dataPolicySearchInput" placeholder="Search..." class="terms-search-input" data-placeholder-da="S√∏g..." data-placeholder-en="Search...">
                <button class="terms-search-clear" id="dataPolicySearchClear" style="display: none;" aria-label="Clear search">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M18 6L6 18M6 6l12 12"/>
                    </svg>
                </button>
            </div>
            <div class="terms-modal-body">
                <div class="terms-modal-loading" id="dataPolicyModalLoading" style="display: none;">
                    <div class="terms-modal-spinner"></div>
                    <p data-i18n-key="modal.loading">Loading...</p>
                </div>
                <div class="terms-modal-content-text" id="dataPolicyModalContent">
                    <!-- Content will be loaded here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Campaign Rejection Modal -->
    <div class="terms-modal" id="campaignRejectionModal" style="display: none;">
        <div class="terms-modal-content">
            <div class="terms-modal-header">
                <h3 class="terms-modal-title" data-i18n-key="modal.campaignRejection.title">Campaign Not Available</h3>
                <div class="terms-modal-header-actions">
                    <button class="terms-modal-close" id="campaignRejectionModalClose" aria-label="Close">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M18 6L6 18M6 6l12 12"/>
                        </svg>
                    </button>
                </div>
            </div>
            <div class="terms-modal-body">
                <div class="campaign-rejection-content">
                    <p class="campaign-rejection-message" data-i18n-key="modal.campaignRejection.message">This offer is not available for your account. This may be due to existing subscriptions or campaign eligibility rules. You can sign up for a regular membership. If you believe this is a mistake, contact support.</p>
                    <div class="campaign-rejection-actions">
                        <button class="campaign-rejection-btn campaign-rejection-btn-primary" id="campaignRejectionOption1" data-i18n-key="modal.campaignRejection.option1">Regular Membership</button>
                        <button class="campaign-rejection-btn campaign-rejection-btn-secondary" id="campaignRejectionOption2" data-i18n-key="modal.campaignRejection.option2">Contact Support</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Payment redirect info (0,01 kr workaround) -->
    <div class="terms-modal" id="paymentRedirectInfoModal" style="display: none;">
        <div class="terms-modal-content">
            <div class="terms-modal-header">
                <h3 class="terms-modal-title" data-i18n-key="modal.paymentRedirectInfo.title">Ready for payment</h3>
                <div class="terms-modal-header-actions">
                    <button type="button" class="terms-modal-close" id="paymentRedirectInfoModalClose" aria-label="Close">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M18 6L6 18M6 6l12 12"/>
                        </svg>
                    </button>
                </div>
            </div>
            <div class="terms-modal-body">
                <div class="campaign-rejection-content">
                    <p class="campaign-rejection-message" data-i18n-key="modal.paymentRedirectInfo.message">You'll be taken to the payment page. It may show 0,01 kr because of a free item in your cart ‚Äì you won't be charged more.</p>
                    <div class="campaign-rejection-actions">
                        <button type="button" class="campaign-rejection-btn campaign-rejection-btn-primary" id="paymentRedirectInfoContinue" data-i18n-key="modal.paymentRedirectInfo.continue">Continue to payment</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Global Footer -->
    <footer class="global-footer">
        <div class="footer-content">
            <div class="footer-section">
                <h4 data-i18n-key="footer.terms.title">Terms and Conditions</h4>
                <ul>
                    <li>
                        <a href="#" data-action="open-terms" data-terms-type="terms" data-i18n-key="footer.terms.all">
                            Terms and Conditions
                        </a>
                    </li>
                </ul>
            </div>
            
            <div class="footer-section">
                <h4 data-i18n-key="footer.policies.title">Policies</h4>
                <ul>
                    <li>
                        <a href="#" data-action="open-terms" data-terms-type="privacy" data-i18n-key="footer.policies.privacy">
                            Privacy Policy
                        </a>
                    </li>
                    <li>
                        <a href="#" data-action="open-terms" data-terms-type="cookie" data-i18n-key="footer.policies.cookie">
                            Cookie Policy
                        </a>
                    </li>
                    <li>
                        <button type="button" class="footer-cookie-settings-link" id="cookieSettingsButton" data-i18n-key="cookie.settings.button">
                            Cookie Settings
                        </button>
                    </li>
                </ul>
            </div>
        </div>
        
        <div class="footer-bottom">
            <div class="footer-bottom-content">
                <p><span data-i18n-key="footer.copyright">¬© 2026 Boulders. All rights reserved.</span> <a href="https://boulders.dk" target="_blank" rel="noopener noreferrer">boulders.dk</a></p>
            </div>
        </div>
    </footer>

    <!-- API Configuration -->
    <script type="module">
        // Make API auth token available globally (not needed for this endpoint - uses "No Auth")
        window.API_AUTH_TOKEN = import.meta.env?.VITE_API_AUTH_TOKEN || '';
    </script>
    <!-- Postal codes script - load with error handling -->
    <script>
      // Load postal codes script with error handling
      const postalCodesScript = document.createElement('script');
      postalCodesScript.src = './postal-codes-dk.js';
      postalCodesScript.onerror = function() {
        console.warn('postal-codes-dk.js not found - postal code auto-fill will be disabled');
      };
      document.head.appendChild(postalCodesScript);
    </script>
    <script type="module" src="./app.js"></script>

    <!-- Cookie Consent Banner -->
    <div class="cookie-banner" id="cookieBanner" style="display: none;" role="dialog" aria-labelledby="cookieBannerTitle" aria-describedby="cookieBannerDescription">
        <div class="cookie-banner-content">
            <div class="cookie-banner-text">
                <h3 class="cookie-banner-title" id="cookieBannerTitle" data-i18n-key="cookie.banner.title">We use cookies</h3>
                <p class="cookie-banner-description" id="cookieBannerDescription" data-i18n-key="cookie.banner.description">
                    We use cookies to enhance your browsing experience, analyze site traffic, and personalize content. By clicking "Accept All", you consent to our use of cookies. You can manage your preferences or learn more in our <a href="#" data-action="open-terms" data-terms-type="cookie" class="cookie-banner-link">Cookie Policy</a>.
                </p>
            </div>
            <div class="cookie-banner-actions">
                <button type="button" class="cookie-banner-btn cookie-banner-btn-settings" id="cookieBannerSettings" data-i18n-key="cookie.banner.settings">
                    Customize
                </button>
                <button type="button" class="cookie-banner-btn cookie-banner-btn-secondary" id="cookieBannerReject" data-i18n-key="cookie.banner.reject">
                    Reject All
                </button>
                <button type="button" class="cookie-banner-btn cookie-banner-btn-primary" id="cookieBannerAccept" data-i18n-key="cookie.banner.accept">
                    Accept All
                </button>
            </div>
        </div>
        
        <!-- Cookie Settings Panel (initially hidden) -->
        <div class="cookie-settings-panel" id="cookieSettingsPanel" style="display: none;">
            <div class="cookie-settings-header">
                <h4 class="cookie-settings-title" data-i18n-key="cookie.settings.title">Cookie Preferences</h4>
                <button type="button" class="cookie-settings-close" id="cookieSettingsClose" aria-label="Close settings">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M18 6L6 18M6 6l12 12"/>
                    </svg>
                </button>
            </div>
            <div class="cookie-settings-content">
                <p class="cookie-settings-description" data-i18n-key="cookie.settings.description">
                    Manage your cookie preferences. You can enable or disable different types of cookies below. Essential cookies cannot be disabled as they are necessary for the website to function.
                </p>
                
                <div class="cookie-categories">
                    <!-- Essential Cookies (always enabled) -->
                    <div class="cookie-category">
                        <div class="cookie-category-header">
                            <div class="cookie-category-info">
                                <h5 class="cookie-category-title" data-i18n-key="cookie.category.essential.title">Essential Cookies</h5>
                                <p class="cookie-category-desc" data-i18n-key="cookie.category.essential.desc">These cookies are necessary for the website to function and cannot be disabled.</p>
                            </div>
                            <label class="cookie-toggle">
                                <input type="checkbox" id="cookieEssential" checked disabled>
                                <span class="cookie-toggle-slider"></span>
                            </label>
                        </div>
                    </div>
                    
                    <!-- Analytics Cookies -->
                    <div class="cookie-category">
                        <div class="cookie-category-header">
                            <div class="cookie-category-info">
                                <h5 class="cookie-category-title" data-i18n-key="cookie.category.analytics.title">Analytics Cookies</h5>
                                <p class="cookie-category-desc" data-i18n-key="cookie.category.analytics.desc">These cookies help us understand how visitors interact with our website by collecting and reporting information anonymously.</p>
                            </div>
                            <label class="cookie-toggle">
                                <input type="checkbox" id="cookieAnalytics">
                                <span class="cookie-toggle-slider"></span>
                            </label>
                        </div>
                    </div>
                    
                    <!-- Marketing Cookies -->
                    <div class="cookie-category">
                        <div class="cookie-category-header">
                            <div class="cookie-category-info">
                                <h5 class="cookie-category-title" data-i18n-key="cookie.category.marketing.title">Marketing Cookies</h5>
                                <p class="cookie-category-desc" data-i18n-key="cookie.category.marketing.desc">These cookies are used to deliver advertisements and track campaign effectiveness.</p>
                            </div>
                            <label class="cookie-toggle">
                                <input type="checkbox" id="cookieMarketing">
                                <span class="cookie-toggle-slider"></span>
                            </label>
                        </div>
                    </div>
                    
                    <!-- Functional Cookies -->
                    <div class="cookie-category">
                        <div class="cookie-category-header">
                            <div class="cookie-category-info">
                                <h5 class="cookie-category-title" data-i18n-key="cookie.category.functional.title">Functional Cookies</h5>
                                <p class="cookie-category-desc" data-i18n-key="cookie.category.functional.desc">These cookies enable enhanced functionality and personalization, such as remembering your preferences.</p>
                            </div>
                            <label class="cookie-toggle">
                                <input type="checkbox" id="cookieFunctional">
                                <span class="cookie-toggle-slider"></span>
                            </label>
                        </div>
                    </div>
                </div>
            </div>
            <div class="cookie-settings-actions">
                <button type="button" class="cookie-banner-btn cookie-banner-btn-secondary" id="cookieSettingsSave" data-i18n-key="cookie.settings.save">
                    Save Preferences
                </button>
            </div>
        </div>
    </div>
    

</body>
</html>
