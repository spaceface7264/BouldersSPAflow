<!DOCTYPE html>
<html lang="da">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Boulders - Bliv Medlem</title>
    <link rel="shortcut icon" type="image/png" href="./favicon.png">
    <link rel="icon" type="image/png" href="./favicon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="./favicon.png">
    <link rel="icon" type="image/png" sizes="16x16" href="./favicon.png">
    <link rel="apple-touch-icon" sizes="180x180" href="./favicon.png">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="./styles.css">
</head>
<body>
    <!-- Loading Overlay -->
    <div class="loading-overlay" id="loadingOverlay">
        <div class="loading-spinner">
            <div class="spinner"></div>
        </div>
    </div>
    
    <header class="header" id="headerContent" style="display: none;">
        <div class="header-container">
            <div class="header-content">
                <!-- Text Above Logo -->
                <div class="header-text">JOIN</div>
                
                <!-- Logo Section -->
                <div class="logo-section">
                    <img src="https://storage.googleapis.com/boulderscss/logo-flat-white.png" alt="Boulders Logo" class="logo-image" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';" />
                    <div class="logo-fallback">BOULDERS</div>
                </div>
                
                <!-- Language Switcher -->
                <div class="language-switcher" id="languageSwitcher">
                    <button type="button" class="language-btn" data-lang="da-DK" aria-label="Switch to Danish">
                        <span class="language-flag">ðŸ‡©ðŸ‡°</span>
                        <span class="language-name">DA</span>
                    </button>
                    <button type="button" class="language-btn" data-lang="en-GB" aria-label="Switch to English">
                        <span class="language-flag">ðŸ‡¬ðŸ‡§</span>
                        <span class="language-name">EN</span>
                    </button>
                </div>
            </div>
        </div>
    </header>
    
    <!-- Selected Gym Heads-up Display -->
    <div class="gym-heads-up" id="gymHeadsUp">
        <div class="gym-heads-up-content">
            <span class="gym-heads-up-label" data-i18n-key="gym.headsUp">Home gym selected:</span>
            <span class="gym-heads-up-name" id="selectedGymName">-</span>
        </div>
    </div>
    
    <!-- Selected Access Type Heads-up Display -->
    <div class="access-heads-up" id="accessHeadsUp">
        <div class="access-heads-up-content">
            <span class="access-heads-up-label" data-i18n-key="access.headsUp">Access type selected:</span>
            <span class="access-heads-up-name" id="selectedAccessName">-</span>
        </div>
    </div>
    
    <!-- Step Indicator -->
    <div class="step-indicator">
        <div class="step-indicator-container">
            <div class="step-indicator-content">
                <div class="step active">
                    <div class="step-circle active">1</div>
                    <div class="step-label" data-i18n-key="step.homeGym">Home Gym</div>
                </div>
                <div class="step-connector"></div>
                <div class="step inactive">
                    <div class="step-circle inactive">2</div>
                    <div class="step-label" data-i18n-key="step.access">Access</div>
                </div>
                <div class="step-connector"></div>
                <div class="step inactive">
                    <div class="step-circle inactive">3</div>
                    <div class="step-label" data-i18n-key="step.boost">Boost</div>
                </div>
                <div class="step-connector"></div>
                <div class="step inactive">
                    <div class="step-circle inactive">4</div>
                    <div class="step-label" data-i18n-key="step.send">Send</div>
                </div>
            </div>
        </div>
        <div class="selected-gym-display" id="selectedGymDisplay" style="display: none;">
            <span class="selected-gym-label" data-i18n-key="header.selectedGym">Selected Gym:</span>
            <button type="button" class="selected-gym-link" id="selectedGymLink" data-action="edit-gym">
                <span id="selectedGymNameDisplay">-</span>
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path>
                    <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path>
                </svg>
            </button>
        </div>
    </div>

    <main class="main" id="mainContent" style="display: none;">
        
        
        <!-- Step Content -->
        <div class="step-content">
            <!-- Step 1: Gym Selection -->
            <div class="step-panel active" id="step-1">
                <div class="step-panel-content">
                    <p class="main-subtitle" data-i18n-key="main.subtitle.step1">Choose your home gym</p>
                    <p class="secondary-subtitle" data-i18n-key="main.subtitle.step1.secondary">This is where you will primarily train âˆ’ you will have access to all gyms.</p>
                    
                    <!-- Search Input -->
                    <div class="search-wrapper">
                        <svg class="search-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <circle cx="11" cy="11" r="8"></circle>
                            <path d="m21 21-4.35-4.35"></path>
                        </svg>
                        <input type="text" class="search-input" placeholder="" id="gymSearch" data-i18n-key="button.searchGyms" data-i18n-placeholder="button.searchGyms">
                        <button type="button" class="location-icon-btn" id="findNearestGym" title="" data-i18n-title="button.findNearest">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"></path>
                                <circle cx="12" cy="10" r="3"></circle>
                            </svg>
                        </button>
                        <span class="location-status" id="locationStatus" style="display: none;"></span>
                    </div>
                    
                    <!-- Gym List -->
                    <div class="gym-list">
                        <!-- Gym items will be dynamically loaded here -->
                    </div>
                    
                    <!-- No Results Message -->
                    <div class="no-results hidden" id="noResults" data-i18n-key="search.noResults">
                        No gyms found matching your search.
                    </div>
                </div>
            </div>

            <!-- Step 2: Choose Plan -->
            <div class="step-panel" id="step-2">
                <div class="step-panel-content">
                    <div class="container">
                        <p class="main-subtitle" data-i18n-key="main.subtitle.step2">Choose your access type</p>
                        <p class="secondary-subtitle" data-i18n-key="main.subtitle.step2.secondary">Choose membership if you climb at least once a month.</p>
                        <div class="category-list">
                            <!-- Campaign Category -->
                            <div class="category-item" data-category="campaign">
                                <div class="category-header">
                                    <div class="category-info">
                                        <div class="category-title" data-i18n-key="category.campaign">Campaign</div>
                                        <div class="category-subtitle" data-i18n-key="category.campaign.subtitle">Limited time offers</div>
                                    </div>
                                    <i data-lucide="chevron-down" class="category-icon"></i>
                                </div>
                                <div class="category-content">
                                    <div class="category-description">
                                        <p data-i18n-key="category.campaign.desc">Special promotional offers and limited-time campaigns. Take advantage of these exclusive deals while they last.</p>
                                    </div>
                                    <div class="plans-list">
                                        <!-- Products will be loaded from API -->
                                    </div>
                                </div>
                            </div>

                            <!-- Membership Category -->
                            <div class="category-item" data-category="membership">
                                <div class="category-header">
                                    <div class="category-info">
                                        <div class="category-title" data-i18n-key="category.membership">Membership</div>
                                        <div class="category-subtitle" data-i18n-key="category.membership.subtitle">Ongoing subscription, unlimited access</div>
                                    </div>
                                    <i data-lucide="chevron-down" class="category-icon"></i>
                                </div>
                                <div class="category-content">
                                    <div class="category-description">
                                        <p data-i18n-key="category.membership.desc">Membership is an ongoing subscription with automatic renewal. No signup or cancellation fees. Notice period is the rest of the month + 1 month. </p>
                                    </div>
                                    <div class="plans-list">
                                        <!-- Products will be loaded from API -->
                                    </div>
                                </div>
                            </div>

                            <!-- 15 Day Pass Category -->
                            <div class="category-item" data-category="15daypass">
                                <div class="category-header">
                                    <div class="category-info">
                                        <div class="category-title" data-i18n-key="category.15daypass">15 Day Pass</div>
                                        <div class="category-subtitle" data-i18n-key="category.15daypass.subtitle">Temporary access pass</div>
                                    </div>
                                    <i data-lucide="chevron-down" class="category-icon"></i>
                                </div>
                                <div class="category-content">
                                    <div class="category-description">
                                        <p data-i18n-key="category.15daypass.desc">Get 15 days of unlimited access to all gyms. Perfect for trying out climbing or a short-term visit.</p>
                                    </div>
                                    <div class="plans-list">
                                        <!-- Products will be loaded from API -->
                                    </div>
                                </div>
                            </div>

                            <!-- Punch Card Category -->
                            <div class="category-item" data-category="punchcard">
                                <div class="category-header">
                                    <div class="category-info">
                                        <div class="category-title" data-i18n-key="category.punchcard">Punch Card</div>
                                        <div class="category-subtitle" data-i18n-key="category.punchcard.subtitle">10 entries, shareable physical card</div>
                                    </div>
                                    <i data-lucide="chevron-down" class="category-icon"></i>
                                </div>
                                <div class="category-content">
                                    <div class="category-description">
                                        <p data-i18n-key="category.punchcard.desc">You can buy 1 type of value card at a time. Each entry uses one clip on your value card. Card is valid for 5 years and does not include membership benefits. Refill within 14 days after your last clip and get 100 kr off at the gym.</p>
                                    </div>
                                    <div class="plans-list">
                                        <!-- Products will be loaded from API -->
                                    </div>
                                </div>
                            </div>
                        </div>


                    </div>
                </div>
            </div>
            
            <!-- Step 3: Add-ons -->
            <div class="step-panel" id="step-3">
                <div class="step-panel-content">
                            <p class="main-subtitle" id="mainSubtitle" data-i18n-key="main.subtitle.step3">Would you like fries with that?</p>

                    <!-- Add-on Products -->
                    <div class="plan-section">
                        <div class="plan-info-text">
                            <p data-i18n-key="addons.intro">Enhance your climbing experience with our add-on products.</p>
                        </div>
                        
                        <div class="plan-options" id="addonMode" data-scroll-container data-component="addon-plans"></div>
                        <div class="skip-section">
                                <button type="button" class="back-btn" id="backFromAddons" data-action="go-back-step" data-i18n-key="button.back">
                                Back
                            </button>
                            <button type="button" class="skip-btn" id="skipAddons" data-action="toggle-addons-step" data-i18n-key="button.skip">
                                Skip
                            </button>
                        </div>
                        <div class="scroll-indicator" aria-hidden="true"></div>
                        
                        <!-- Navigation Buttons -->
                        
                    </div>
                </div>
            </div>
            
            <!-- Step 4: Info -->
            <div class="step-panel" id="step-4">
                <div class="step-panel-content">
                    <p class="main-subtitle">Complete your purchase</p>
                    <p class="secondary-subtitle">Log in to your existing account or create a new one.</p>

                    <div class="info-layout">
                        <div class="info-form-section">
                            <!-- Login Section -->
                            <div class="info-section" data-auth-section="login">
                                <div class="form-container">
                                    <!-- Auth Mode Toggle Button - Top Right -->
                                    <button class="auth-mode-switch-btn" id="authModeSwitchBtn" data-action="switch-auth-mode" data-mode="create">
                                        <span class="auth-mode-switch-text">Create Account</span>
                                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                            <path d="M18 3a3 3 0 0 0-3 3v12a3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3H6a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3V6a3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3h12a3 3 0 0 0 3-3 3 3 0 0 0-3-3z"></path>
                                        </svg>
                                    </button>
                                    <div class="login-status" data-login-status style="display: none;">
                                        <div class="login-status-content">
                                            <div class="login-status-profile">
                                                <div class="login-status-header">
                                                    <p class="login-status-label">Logged in as</p>
                                                    <p class="login-status-name" data-auth-name>-</p>
                                                    <p class="login-status-email" data-auth-email>-</p>
                                                    <p class="login-status-dob" data-auth-dob style="display: none;">-</p>
                                                    <p class="login-status-address" data-auth-address style="display: none;">-</p>
                                                    <p class="login-status-phone" data-auth-phone style="display: none;">-</p>
                                                </div>
                                                <div class="login-status-details" data-auth-details style="display: none;">
                                                    <div class="profile-detail-item" data-profile-item="address" style="display: none;">
                                                        <span class="profile-detail-label">Address:</span>
                                                        <span class="profile-detail-value" data-profile-address>-</span>
                                                    </div>
                                                </div>
                                            </div>
                                            <button type="button" class="login-btn" data-action="logout">Log out</button>
                                        </div>
                                    </div>

                                    <div data-login-form-container>
                                        <h3 class="info-section-title">LOG IN</h3>

                                        <form class="login-form">
                                            <div class="form-group">
                                                <label for="loginEmail">E-mail*</label>
                                                <input type="email" id="loginEmail" name="loginEmail" placeholder="E-mail">
                                        </div>
                                                
                                            <div class="form-group">
                                                <label for="loginPassword">Password*</label>
                                                <input type="password" id="loginPassword" name="loginPassword" placeholder="Enter your password">
                                                <a href="#" class="forgot-password-link" data-action="forgot-password">Forgot password?</a>
                                        </div>
                                                
                                            <button type="submit" class="login-btn">LOG IN</button>
                                        </form>
                                        
                                        <!-- Forgot Password Modal -->
                                        <div class="forgot-password-modal" id="forgotPasswordModal" style="display: none;">
                                            <div class="forgot-password-modal-content">
                                                <h3 class="info-section-title">RESET PASSWORD</h3>
                                                <p class="forgot-password-description">Enter your email address and we'll send you instructions to reset your password.</p>
                                                
                                                <form class="forgot-password-form" id="forgotPasswordForm">
                                                    <div class="form-group">
                                                        <label for="forgotPasswordEmail">E-mail*</label>
                                                        <input type="email" id="forgotPasswordEmail" name="forgotPasswordEmail" placeholder="Enter your email" required>
                                                    </div>
                                                    
                                                    <div class="forgot-password-actions">
                                                        <button type="button" class="forgot-password-cancel-btn" data-action="close-forgot-password">Cancel</button>
                                                        <button type="submit" class="login-btn">SEND RESET LINK</button>
                                                    </div>
                                                </form>
                                                
                                                <div class="forgot-password-success" id="forgotPasswordSuccess" style="display: none;">
                                                    <p class="forgot-password-success-message">Password reset instructions have been sent to your email.</p>
                                                    <button type="button" class="login-btn" data-action="close-forgot-password">Close</button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Registration Section (initially hidden) -->
                            <div class="info-section" data-auth-section="create" style="display: none;">
                        <div class="form-container">
                            <!-- Auth Mode Toggle Button - Top Right -->
                            <button class="auth-mode-switch-btn" id="authModeSwitchBtn" data-action="switch-auth-mode" data-mode="login">
                                <span class="auth-mode-switch-text">Login</span>
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <path d="M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4"></path>
                                    <polyline points="10 17 15 12 10 7"></polyline>
                                    <line x1="15" y1="12" x2="3" y2="12"></line>
                                </svg>
                            </button>
                            <h3 class="info-section-title">CREATE PROFILE</h3>
                        <div class="buyer-section">
                            <div class="buyer-header">
                                <h4 class="buyer-title">Buyer</h4>
                            </div>
                        </div>
                            <form class="registration-form">
                        <div class="form-row">
                        <div class="form-group">
                                    <label for="firstName">First name*</label>
                                    <input type="text" id="firstName" name="firstName" placeholder="First Name" data-api-field="customer.firstName" required>
                                     <div class="error-message">Please enter your first name</div>
                                 </div>
                                 
                                 <div class="form-group">
                                    <label for="lastName">Last name*</label>
                                    <input type="text" id="lastName" name="lastName" placeholder="Lst name" data-api-field="customer.lastName" required>
                                     <div class="error-message">Please enter your last name</div>
                                 </div>
                             </div>
                             
                             <div class="form-group">
                                 <label for="dateOfBirth">Date of birth*</label>
                                 <div class="date-input-container">
                                     <input type="date" id="dateOfBirth" name="dateOfBirth" class="date-input" data-api-field="customer.dateOfBirth" required>
                                     
                                 </div>
                             </div>
                             
                            <div class="form-group">
                                <label for="streetAddress">Street and house number*</label>
                                <input type="text" id="streetAddress" name="streetAddress" placeholder="Street and house nr" data-api-field="customer.address.street" required>
                        </div>
                        
                        <div class="form-row">
                            <div class="form-group">
                                    <label for="postalCode">Postal code*</label>
                                    <input type="text" id="postalCode" name="postalCode" placeholder="Zipcode" data-api-field="customer.address.postalCode" required>
                            </div>
                            
                            <div class="form-group">
                                     <label for="city">City</label>
                                     <input type="text" id="city" name="city" placeholder="Auto" data-api-field="customer.address.city" readonly>
                            </div>
                        </div>
                        
                        <div class="form-group">
                                 <label for="email">E-mail*</label>
                                 <input type="email" id="email" name="email" placeholder="Enter your email" data-api-field="customer.email" required>
                                 <div class="error-message">Please enter a valid email address</div>
                             </div>
                             
                             <div class="form-row">
                                 <div class="form-group phone-country">
                                     <label for="countryCode">Country</label>
                                     <div class="country-selector">
                                         <span class="flag-icon">ðŸ‡©ðŸ‡°</span>
                                         <select id="countryCode" name="countryCode" data-api-field="customer.phone.countryCode" required>
                                             <option value="+45">+45</option>
                                         </select>
                                     </div>
                                 </div>
                                 
                                 <div class="form-group phone-number">
                                     <label for="phoneNumber">Mobile number*</label>
                                     <input type="tel" id="phoneNumber" name="phoneNumber" placeholder="12345678" data-api-field="customer.phone.number">
                                 </div>
                             </div>
                             
                             <div class="form-group">
                                 <label for="password">Password*</label>
                                 <input type="password" id="password" name="password" placeholder="Create a password" data-api-field="customer.password" required>
                             </div>
                             
                            <div class="form-group">
                                <label for="confirmPassword">Confirm password*</label>
                                <input type="password" id="confirmPassword" name="confirmPassword" placeholder="Confirm your password" data-api-field="customer.passwordConfirmation" required>
                            </div>
                            
                            <!-- Save Account Button -->
                            <div class="form-group">
                                <button type="button" class="save-account-btn" data-action="save-account">
                                    Save Account
                                </button>
                                <div class="save-account-message" id="saveAccountMessage" style="display: none;"></div>
                            </div>
                    </form>
                        
                        <!-- Parent/Guardian Registration Form -->
                        <div class="parent-guardian-form" id="parentGuardianForm" style="display: none;">
                            <h4 class="parent-form-title">Parent/Guardian Information</h4>

                            
                            <!-- Same Address Toggle -->
                            <div class="same-address-toggle">
                                <label class="toggle-label">
                                    <input type="checkbox" class="toggle-input" id="sameAddressToggle" data-api-field="guardian.sameAddressAsCustomer">
                                    <span class="toggle-slider"></span>
                                    Same address and contact information
                                </label>
            </div>
            
                            <form class="registration-form">
                                <div class="form-group">
                                    <label for="parentFullName">First and last name*</label>
                                    <input type="text" id="parentFullName" name="parentFullName" placeholder="Enter your full name" data-api-field="guardian.fullName" required>
            </div>
            
                                <div class="form-group">
                                    <label for="parentDateOfBirth">Date of birth*</label>
                                    <div class="date-input-container">
                                        <input type="date" id="parentDateOfBirth" name="parentDateOfBirth" class="date-input" data-api-field="guardian.dateOfBirth" required>
                                       
                                    </div>
                                </div>
                                
                                <div class="form-group">
                                    <label for="parentStreetAddress">Street and house number*</label>
                                    <input type="text" id="parentStreetAddress" name="parentStreetAddress" placeholder="Enter street and house number" data-api-field="guardian.address.street" required>
                                </div>
                                
                                <div class="form-row">
                                    <div class="form-group">
                                        <label for="parentPostalCode">Postal code*</label>
                                        <input type="text" id="parentPostalCode" name="parentPostalCode" placeholder="1234" data-api-field="guardian.address.postalCode" required>
                                    </div>
                                    
                                    <div class="form-group">
                                        <label for="parentCity">City</label>
                                        <input type="text" id="parentCity" name="parentCity" placeholder="Copenhagen" data-api-field="guardian.address.city" readonly>
                                    </div>
                                </div>
                                
                                <div class="form-group">
                                    <label for="parentEmail">E-mail*</label>
                                    <input type="email" id="parentEmail" name="parentEmail" placeholder="Enter your email" data-api-field="guardian.email" required>
                                </div>
                                
                                <div class="form-row">
                                    <div class="form-group phone-country">
                                        <label for="parentCountryCode">Country</label>
                                        <div class="country-selector">
                                            <span class="flag-icon">ðŸ‡©ðŸ‡°</span>
                                            <select id="parentCountryCode" name="parentCountryCode" data-api-field="guardian.phone.countryCode" required>
                                                <option value="+45">+45</option>
                                            </select>
                                            <span class="dropdown-arrow">â–¼</span>
                                        </div>
                                    </div>
                                    
                                    <div class="form-group phone-number">
                                        <label for="parentPhoneNumber">Mobile number*</label>
                                        <input type="tel" id="parentPhoneNumber" name="parentPhoneNumber" placeholder="12345678" data-api-field="guardian.phone.number">
                                    </div>
                                </div>
                                
                                <div class="form-group">
                                    <label for="parentPassword">Password*</label>
                                    <input type="password" id="parentPassword" name="parentPassword" placeholder="Create a password" data-api-field="guardian.password" required>
                                </div>
                                
                                <div class="form-group">
                                    <label for="parentConfirmPassword">Confirm password*</label>
                                    <input type="password" id="parentConfirmPassword" name="parentConfirmPassword" placeholder="Confirm your password" data-api-field="guardian.passwordConfirmation" required>
                                </div>
                                
                                <div class="form-group">
                                    <label for="parentPrimaryGym">Primary Boulders gym / Pick-up point*</label>
                                    <div class="select-container">
                                        <select id="parentPrimaryGym" name="parentPrimaryGym" data-api-field="guardian.primaryGym" required>
                                            <option value="">Select a gym</option>
                                            <option value="boulders-copenhagen">Boulders Copenhagen</option>
                                            <option value="boulders-aarhus">Boulders Aarhus</option>
                                            <option value="boulders-odense">Boulders Odense</option>
                                        </select>
                                        <span class="dropdown-arrow">â–¼</span>
                                    </div>
                                </div>
                            </form>
                        </div>
                    </div>
                            </div>
                        </div>
                        
                        <!-- Order Summary Section -->
                        <div class="order-summary-section">
                            <div class="order-summary">
                                <div class="summary-header">
                                    <h3 class="summary-title">Cart</h3>
                                    <button class="summary-edit-btn" type="button" data-action="edit-cart" aria-label="Edit cart">
                                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                                            <path d="M12 20h9"/>
                                            <path d="M16.5 3.5a2.121 2.121 0 0 1 3 3L7 19l-4 1 1-4L16.5 3.5z"/>
                                        </svg>
                                    </button>
                                </div>
                                
                                <!-- Cart Items -->
                                <template id="cart-item-template">
                                    <div class="cart-item" data-cart-item>
                                        <span class="item-name" data-element="name"></span>
                                        <span class="item-price" data-element="price"></span>
                                    </div>
                                </template>

                                <!-- Add-on Card Template for modal and in-page rendering -->
                                <template id="addon-card-template">
                                    <div class="plan-card addon-card" data-plan-id>
                                        <div class="plan-info">
                                            <div class="plan-type" data-element="name">Add-on</div>
                                            <div class="plan-details">
                                                <span data-element="originalPrice"></span>
                                                <div class="plan-price">
                                                    <span class="price-amount" data-element="discountedPrice">0</span>
                                                    <span class="price-unit">kr</span>
                                                </div>
                                                <span class="plan-description" data-element="description"></span>
                                            </div>
                                        </div>
                                        <div class="plan-meta">
                                            <div class="plan-original" style="text-decoration: line-through; opacity: .6;">
                                                
                                            </div>
                                            <ul class="plan-features" data-element="features"></ul>
                                        </div>
                                        <div class="check-circle" data-action="toggle-addon"></div>
                                    </div>
                                </template>

                                <div class="cart-items" data-component="cart-items"></div>
                                
                                <!-- Payment Overview -->
                                <div class="payment-overview" style="display: none;">
                                    <div class="payment-overview-item">
                                        <span class="payment-label" data-i18n-key="cart.monthlyFee">Monthly fee:</span>
                                        <span class="payment-amount" data-summary-field="monthly-payment">0,00 kr./md</span>
                                    </div>
                                    <div class="payment-overview-item payment-overview-paynow">
                                        <div class="payment-overview-paynow-row">
                                            <span class="payment-label" data-i18n-key="cart.payNow">Pay now:</span>
                                            <span class="payment-amount" data-summary-field="pay-now">0,00 kr.</span>
                                        </div>
                                        <div class="payment-overview-billing-period" data-summary-field="payment-billing-period"></div>
                                    </div>
                                </div>
                                
                                <!-- Discount Code -->
                                <div class="discount-section">
                                    <button class="discount-toggle" type="button">
                                        <span data-i18n-key="cart.discount">Discount code</span>
                                        <span class="toggle-icon">+</span>
                                    </button>
                                    <div class="discount-form" style="display: none;">
                                        <input type="text" placeholder="" class="discount-input" data-i18n-placeholder="cart.discount">
                                        <button type="button" class="apply-discount-btn" data-i18n-key="button.apply">Apply</button>
                                    </div>
                                </div>
                                
                                <!-- Consents -->
                                <div class="consents-section">
                                    <label class="consent-checkbox">
                                        <input type="checkbox" id="termsConsent" data-api-field="consent.terms" required>
                                        <span class="checkmark"></span>
                                        <span class="consent-text">I accept the <a href="#" data-action="open-terms" data-terms-type="terms" onclick="event.preventDefault();">Terms and Conditions</a></span>
                                    </label>
                                    
                                    <label class="consent-checkbox">
                                        <input type="checkbox" id="marketingConsent" data-api-field="consent.marketing" checked>
                                        <span class="checkmark"></span>
                                        <span class="consent-text">I want to receive marketing emails. Read our <a href="#" data-action="open-terms" data-terms-type="privacy" onclick="event.preventDefault();">Data policy</a>.</span>
                                    </label>
                                </div>
                                
                                <!-- Payment Methods -->
                                <div class="payment-methods">
                                    <h4 class="payment-title">Choose payment method</h4>
                                    <p style="font-size: 0.875rem; color: #666; margin-bottom: 1rem; margin-top: 0.5rem;">
                                        You will be redirected to our secure payment provider to complete your payment.
                                    </p>
                                    
                                    <div class="payment-option">
                                        <input type="radio" id="cardPayment" name="paymentMethod" value="card" data-api-field="payment.method">
                                        <label for="cardPayment" class="payment-label">
                                            <div class="payment-icon">
                                                <svg width="24" height="16" viewBox="0 0 24 16" fill="none">
                                                    <rect x="1" y="3" width="22" height="10" rx="2" stroke="currentColor" stroke-width="2"/>
                                                    <path d="M1 7h22" stroke="currentColor" stroke-width="2"/>
                                                </svg>
                                            </div>
                                            <span>Card payment</span>
                                        </label>
                                    </div>
                                    
                                    <div class="payment-option">
                                        <input type="radio" id="applePay" name="paymentMethod" value="apple" data-api-field="payment.method">
                                        <label for="applePay" class="payment-label">
                                            <div class="payment-icon">
                                                <svg width="24" height="16" viewBox="0 0 24 16" fill="none">
                                                    <path d="M12 2C8.5 2 6 4.5 6 8c0 3.5 2.5 6 6 6s6-2.5 6-6c0-3.5-2.5-6-6-6z" stroke="currentColor" stroke-width="2"/>
                                                    <path d="M12 6v4l2 2" stroke="currentColor" stroke-width="2"/>
                                                </svg>
                                            </div>
                                            <span>Apple Pay</span>
                                        </label>
                                    </div>
                                </div>
                                
                                <!-- Card Payment Form - REMOVED: Users are redirected to payment provider -->
                                <!-- This form is not used - payment is handled by external payment provider -->
                                <div class="card-payment-form" id="cardPaymentForm" style="display: none !important;">
                                    <!-- Form removed - users are redirected to payment provider for card entry -->
                                </div>
                                
                                <!-- Checkout Button -->
                                <button class="checkout-btn" data-action="submit-checkout" disabled>
                                    Checkout
                                </button>
                                
                                <!-- Footer Note -->
                                <div class="footer-note">
                                    <span class="certified-icon">âœ“</span>
                                    Certified safe trade with danish e-mÃ¦rket
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
            
            <!-- Step 5: Confirmation -->
            <div class="step-panel" id="step-5">
                <div class="step-panel-content">
                    <!-- Top Section - Success Confirmation -->
                    <div class="confirmation-header">
                        <div class="success-badge">
                            <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/>
                                <path d="M22 4L12 14.01l-3-3"/>
                            </svg>
                        </div>
                        <h1 class="success-title" data-i18n-key="confirmation.title">SUCCESS!</h1>
                        <p class="success-message" data-i18n-key="confirmation.message">Your membership has been confirmed! You'll receive an email with all the details shortly.</p>
                        </div>
                        
                    <!-- Main Content Layout -->
                    <div class="confirmation-layout">
                        <!-- Left Column - Order & Membership Summary -->
                        <div class="confirmation-left">
                            <!-- Order Details Card -->
                            <div class="confirmation-card">
                                <h3 class="card-title">Order Details</h3>
                                <div class="order-info">
                                    <div class="order-item">
                                        <span class="order-label">Order Number:</span>
                                        <span class="order-value" data-summary-field="order-number">â€”</span>
                                    </div>
                                    <div class="order-item">
                                        <span class="order-label">Date:</span>
                                        <span class="order-value" data-summary-field="order-date">â€”</span>
                                    </div>
                                </div>
                                
                                <template id="confirmation-item-template">
                                    <div class="purchase-item" data-confirmation-item>
                                        <span class="item-name" data-element="name"></span>
                                        <span class="item-price" data-element="price"></span>
                                    </div>
                                </template>

                                <div class="purchase-items" data-component="confirmation-items"></div>
                                
                                <div class="order-total">
                                    <span class="total-label">Total:</span>
                                    <span class="total-amount" data-summary-field="order-total">0,00 kr</span>
                                </div>
                            </div>
                            
                            <!-- Membership Details Card -->
                            <div class="confirmation-card">
                                <h3 class="card-title" data-i18n-key="cart.membershipDetails">Membership Details</h3>
                                <div class="membership-info">
                                    <div class="membership-item">
                                        <span class="membership-label" data-i18n-key="cart.memberName">Member Name:</span>
                                        <span class="membership-value" data-summary-field="member-name">â€”</span>
                                    </div>
                                    <div class="membership-item">
                                        <span class="membership-label" data-i18n-key="cart.membershipNumber">Membership Number:</span>
                                        <span class="membership-value" data-summary-field="membership-number">â€”</span>
                                    </div>
                                    <div class="membership-item">
                                        <span class="membership-label">Type:</span>
                                        <span class="membership-value" data-summary-field="membership-type">â€”</span>
                                    </div>
                                    <div class="membership-item">
                                        <span class="membership-label">Primary Gym:</span>
                                        <span class="membership-value" data-summary-field="primary-gym">â€”</span>
                                    </div>
                                    <div class="membership-item">
                                        <span class="membership-label">Monthly Price:</span>
                                        <span class="membership-value" data-summary-field="membership-price">0,00 kr/month</span>
                                    </div>
                                </div>
                                
                                <button class="login-btn" data-action="open-login">Log in</button>
                            </div>
                        </div>
                        
                        <!-- Right Column - Referral Promo & Next Steps -->
                        <div class="confirmation-right">
                            <!-- Referral Promo Box -->
                            <div class="referral-promo">
                                <h3 class="promo-title">Sharing is Caring!</h3>
                                <p class="promo-text">Refer a friend and you both get 50% off your next month!</p>
                                <button class="referral-btn" data-action="copy-referral">
                                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                        <path d="M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/>
                                        <circle cx="8.5" cy="7" r="4"/>
                                        <path d="M20 8v6"/>
                                        <path d="M23 11h-6"/>
                                    </svg>
                                    Refer a Friend
                                </button>
                                <a href="#" class="terms-link" data-action="open-terms" data-terms-type="terms">Read all terms here</a>
                            </div>
                            
                            <!-- Next Steps -->
                        <div class="next-steps">
                                <h3 class="steps-title">What happens next?</h3>
                                <ul class="steps-list">
                                    <li class="step-item">
                                        <div class="step-icon">
                                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                                <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"/>
                                                <path d="M22 6L12 13 2 6"/>
                                            </svg>
                                        </div>
                                        <span>Email confirmation sent to your inbox</span>
                                    </li>
                                    <li class="step-item">
                                        <div class="step-icon">
                                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                                <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/>
                                                <path d="M22 4L12 14.01l-3-3"/>
                                            </svg>
                                        </div>
                                        <span data-i18n-key="cart.membershipActivation">Membership activation & auto-renewal setup</span>
                                    </li>
                                    <li class="step-item">
                                        <div class="step-icon">
                                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                                <path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"/>
                                                <path d="M3.27 6.96L12 12.01l8.73-5.05"/>
                                                <path d="M12 22.08V12"/>
                                            </svg>
                                        </div>
                                        <span>Pick up your membership card at the gym</span>
                                    </li>
                            </ul>
                        </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>
    
    <!-- Terms Modal -->
    <!-- Terms and Conditions Modal -->
    <div class="terms-modal" id="termsModal" style="display: none;">
        <div class="terms-modal-content">
            <div class="terms-modal-header">
                <h3 class="terms-modal-title" id="termsModalTitle">Terms and Conditions</h3>
                <div class="terms-modal-header-actions">
                    <button class="terms-modal-close" id="termsModalClose" aria-label="Close">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M18 6L6 18M6 6l12 12"/>
                        </svg>
                    </button>
                </div>
            </div>
            <!-- Tabs for Terms Modal (only shown when termsType is 'terms') -->
            <div class="terms-modal-tabs" id="termsModalTabs" style="display: none;">
                <button class="terms-tab active" data-tab="membership" data-i18n-key="terms.tab.membership">Membership / 15 Day</button>
                <button class="terms-tab" data-tab="punchcard" data-i18n-key="terms.tab.punchcard">Punch Card</button>
            </div>
            <!-- Search Input -->
            <div class="terms-modal-search" id="termsModalSearch" style="display: none;">
                <input type="text" id="termsSearchInput" placeholder="Search terms..." class="terms-search-input" data-placeholder-da="SÃ¸g i vilkÃ¥r..." data-placeholder-en="Search terms...">
                <button class="terms-search-clear" id="termsSearchClear" style="display: none;" aria-label="Clear search">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M18 6L6 18M6 6l12 12"/>
                    </svg>
                </button>
            </div>
            <div class="terms-modal-body">
                <div class="terms-modal-loading" id="termsModalLoading" style="display: none;">
                    <div class="terms-modal-spinner"></div>
                    <p data-i18n-key="modal.loading">Loading...</p>
                </div>
                <div class="terms-modal-content-text" id="termsModalContent">
                    <!-- Content will be loaded here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Data Policy Modal -->
    <div class="terms-modal" id="dataPolicyModal" style="display: none;">
        <div class="terms-modal-content">
            <div class="terms-modal-header">
                <h3 class="terms-modal-title">Data Policy</h3>
                <div class="terms-modal-header-actions">
                    <div class="terms-modal-language-switcher">
                        <button class="language-btn active" data-lang="da" id="dataPolicyModalLangDa">DA</button>
                        <button class="language-btn" data-lang="en" id="dataPolicyModalLangEn">EN</button>
                    </div>
                    <button class="terms-modal-close" id="dataPolicyModalClose" aria-label="Close">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M18 6L6 18M6 6l12 12"/>
                        </svg>
                    </button>
                </div>
            </div>
            <div class="terms-modal-body">
                <div class="terms-modal-loading" id="dataPolicyModalLoading" style="display: none;">
                    <div class="terms-modal-spinner"></div>
                    <p data-i18n-key="modal.loading">Loading...</p>
                </div>
                <div class="terms-modal-content-text" id="dataPolicyModalContent">
                    <!-- Content will be loaded here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Global Footer -->
    <footer class="global-footer">
        <div class="footer-content">
            <div class="footer-section">
                <h4 data-i18n-key="footer.terms.title">Terms and Conditions</h4>
                <ul>
                    <li>
                        <a href="#" data-action="open-terms" data-terms-type="terms" data-i18n-key="footer.terms.all">
                            Terms and Conditions
                        </a>
                    </li>
                </ul>
            </div>
            
            <div class="footer-section">
                <h4 data-i18n-key="footer.policies.title">Policies</h4>
                <ul>
                    <li>
                        <a href="#" data-action="open-terms" data-terms-type="privacy" data-i18n-key="footer.policies.privacy">
                            Privacy Policy
                        </a>
                    </li>
                    <li>
                        <a href="#" data-action="open-terms" data-terms-type="cookie" data-i18n-key="footer.policies.cookie">
                            Cookie Policy
                        </a>
                    </li>
                </ul>
            </div>
        </div>
        
        <div class="footer-bottom">
            <p><span data-i18n-key="footer.copyright">Â© 2026 Boulders. All rights reserved.</span> <a href="https://boulders.dk" target="_blank" rel="noopener noreferrer">boulders.dk</a></p>
        </div>
    </footer>

    <!-- API Configuration -->
    <script type="module">
        // Make API auth token available globally (not needed for this endpoint - uses "No Auth")
        window.API_AUTH_TOKEN = import.meta.env?.VITE_API_AUTH_TOKEN || '';
    </script>
    <!-- Postal codes script - load with error handling -->
    <script>
      // Load postal codes script with error handling
      const postalCodesScript = document.createElement('script');
      postalCodesScript.src = './postal-codes-dk.js';
      postalCodesScript.onerror = function() {
        console.warn('postal-codes-dk.js not found - postal code auto-fill will be disabled');
      };
      document.head.appendChild(postalCodesScript);
    </script>
    <script type="module" src="./api-utils.js"></script>
    <script type="module" src="./app.js"></script>

</body>
</html>
